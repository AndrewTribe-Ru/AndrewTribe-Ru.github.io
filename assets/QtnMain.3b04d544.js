import{Q as N,e as q,f as D,g as M,r as b,h as B,i as F,j as d,k as I,s as O}from"./common.e5796fb6.js";import{Q as g}from"./QBtn.dab5c315.js";import{Q as A}from"./QCardSection.2bf1f146.js";import{Q as L}from"./use-cache.52127d72.js";import{a as z}from"./QSkeleton.64a7694d.js";import{Q as E}from"./QToggle.2b56b923.js";import{Q as j}from"./QCard.80b35fcd.js";import{S as G,a as H,Q as J,_ as K}from"./QtnDetailModal.5cec5dc9.js";import{u as Y}from"./useAxios.ef0e9d3f.js";import{r as i,E as W,ay as v,o as C,a5 as X,d as k,a,w as o,c as Z,a9 as ee,e as u,a4 as w,a7 as te}from"./index.17a483d5.js";import"./render.c21811ee.js";import"./use-dark.b138e361.js";import"./touch.3df10340.js";import"./format.7877170e.js";import"./QSeparator.d2eabae8.js";import"./QList.dfe8eab7.js";import"./QInput.3b53e200.js";import"./focus-manager.05708ea9.js";import"./use-form.e660d19e.js";import"./QItem.e67408f3.js";import"./position-engine.ae3b237b.js";import"./use-tick.5666653d.js";import"./QDialog.86dd37ae.js";import"./use-checkbox.a57d7868.js";import"./QCardActions.f63953ca.js";import"./axios.6e1fcf85.js";const ae={class:"q-ma-md"},le={class:"q-pa-lg flex flex-center"},oe={class:"q-ma-md"},$e={__name:"QtnMain",setup(ne){const m=i(1),Q=i(10),y=i(),_=i(),p=i([]),f=i({qtnTitle:"",mltpYn:"",useYn:""});W(()=>{c()});const V=()=>{c()},P=()=>{O(),c()},x=e=>{n.value.rows=e;let t=n.value.totalRowsCnt/(n.value.currentPage*e);n.value.currentPage=t===0?1:t,c()},c=async()=>{console.log("getQtnList();"),v.show(),await Y("/api/zion/rus/qtn/list",{method:"post",params:{rows:n.value.rows,currentPage:n.value.currentPage,qtnTitle:f.value.qtnTitle,mltpYn:f.value.mltpYn,useYn:f.value.useYn}}).then(e=>{if(e.data.header.code==="I001"){p.value=[];const t=e.data.body,l=e.data.body.list;if(l.length>0){const r=l;for(let s=0;s<r.length;s++){let h=r[s];h.idx=s+1,h.checked=!1,p.value.push(h)}}n.value.max=t.totalPageCnt,n.value.totalRowsCnt=t.totalRowsCnt}else alert(e.data.header.message)}).finally(()=>{v.hide()})},R=()=>{console.log("rgstQtn"),_.value.modalOpen()},T=e=>{console.log("item : ",e),y.value.modalOpen(e.row)},$=async e=>{console.log("toggle item : ",e);let t=e.row.useYn==="Y"?`'${e.row.qtnTitle}' \uC758 \uC0AC\uC6A9\uC744 \uC911\uB2E8\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`:`'${e.row.qtnTitle}' \uC758 \uC0AC\uC6A9\uC744 \uC7AC\uAC1C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`;if(confirm(t)){console.log("logic...");let r=e.row.useYn==="Y"?"N":"Y";v.show(),await U(e,r).then(s=>{console.log("res : ",s),s.data.header.code==="I001"?e.row.useYn=r:alert(s.data.header.message)}).catch(s=>{console.error(s)}).finally(()=>{v.hide()})}},S=()=>{let e=p.value.filter(t=>t.checked==!0);if(e.length>0){let t=e.length==1?`"${e[0].qtnTitle}" \uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`:`"${e[0].qtnTitle}" \uC678 ${e.length-1} \uAC74\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`;t+=`
\uD574\uB2F9 \uB370\uC774\uD130\uB294 \uC0AD\uC81C \uD6C4 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`,confirm(t)}else alert("\uC0AD\uC81C\uD560 \uD56D\uBAA9\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.")},U=(e,t)=>Y("/api/zion/rus/qtn/use/update",{method:"put",params:{useYn:t,qtnSeq:e.row.qtnSeq}}),n=i({max:0,rows:10,currentPage:1,totalRowsCnt:0});return(e,t)=>(C(),X(te,null,[k("div",ae,[a(D,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{navigation:o(()=>[a(N,null,{default:o(()=>[a(g,{onClick:t[0]||(t[0]=l=>e.$refs.stepper.next()),color:"primary",label:m.value===3?"Finish":"Continue"},null,8,["label"]),m.value>1?(C(),Z(g,{key:0,flat:"",color:"primary",onClick:t[1]||(t[1]=l=>e.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):ee("",!0)]),_:1})]),default:o(()=>[a(q,{name:1,title:"1\uB2E8\uACC4",caption:"\uC870\uD68C",icon:"settings",done:m.value>1},{default:o(()=>[u(" \uBB38\uC81C\uB97C \uAC80\uC0C9\uD558\uC138\uC694. ")]),_:1},8,["done"]),a(q,{name:2,title:"2\uB2E8\uACC4",caption:"\uB4F1\uB85D",icon:"create_new_folder",done:m.value>2},{default:o(()=>[u(" \uB4F1\uB85D\uBC84\uD2BC\uC744 \uD1B5\uD574 \uC0C8\uB85C\uC6B4 \uBB38\uC81C\uB97C \uB4F1\uB85D\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. ")]),_:1},8,["done"]),a(q,{name:3,title:"3\uB2E8\uACC4",caption:"\uC218\uC815/\uC0AD\uC81C",icon:"add_comment"},{default:o(()=>[u(" \uB4F1\uB85D\uB41C \uBB38\uC81C\uB97C \uC218\uC815/\uC0AD\uC81C \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. ")]),_:1})]),_:1},8,["modelValue"])]),a(j,{class:"q-ma-md q-pb-md"},{default:o(()=>[a(A,{class:"q-gutter-sm row"},{default:o(()=>[a(G,{item:f.value,onSrchList:c},null,8,["item"])]),_:1}),a(M,{class:"q-mt-md",title:"\uAC1C\uAC15\uBAA9\uB85D",rows:p.value,columns:H,label:b,color:"amber","hide-pagination":"",pagination:{rowsPerPage:0},"row-key":"name"},{"top-right":o(()=>[a(L,{"map-options":"","emit-value":"",modelValue:Q.value,"onUpdate:modelValue":[t[3]||(t[3]=l=>Q.value=l),x],options:B,label:b,"option-value":"value","option-label":"label"},null,8,["modelValue","options","label"])]),body:o(l=>[a(F,{class:"no-wrap text-center"},{default:o(()=>[a(d,{key:"checked",style:{width:"100px"}},{default:o(()=>[a(z,{modelValue:l.row.checked,"onUpdate:modelValue":r=>l.row.checked=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(d,{key:"qtnTitle",class:"cursor-pointer",onClick:r=>T(l)},{default:o(()=>[u(w(l.row.qtnTitle),1)]),_:2},1032,["onClick"]),a(d,{key:"mltpYn"},{default:o(()=>[u(w(l.row.mltpYn),1)]),_:2},1024),a(d,{key:"useYn"},{default:o(()=>[a(E,{"true-value":"Y","false-value":"N","model-value":l.row.useYn,"onUpdate:modelValue":r=>$(l)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),a(d,{key:"frstRegDate"},{default:o(()=>[u(w(l.row.frstRegDate),1)]),_:2},1024),a(d,{key:"frstRegDate"},{default:o(()=>[u(w(l.row.frstRegId),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","columns","label"]),k("div",le,[a(I,{modelValue:n.value.currentPage,"onUpdate:modelValue":[t[4]||(t[4]=l=>n.value.currentPage=l),P],max:n.value.max},null,8,["modelValue","max"])]),k("div",oe,[a(g,{class:"q-mr-md",color:"primary",label:"\uB4F1\uB85D",onClick:R}),a(g,{class:"q-mr-md",color:"white","text-color":"black",label:"\uC0AD\uC81C",onClick:S})])]),_:1}),a(J,{ref_key:"qtnRgstModal",ref:_,onInsertFinish:V},null,512),a(K,{ref_key:"qtnDetailModal",ref:y},null,512)],64))}};export{$e as default};
