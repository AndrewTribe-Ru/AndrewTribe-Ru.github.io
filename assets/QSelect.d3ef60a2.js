import{v as ze,C as ml,D as Je,U as gl,c as C,z as M,A as Nt,B as Ae,E as hl,F as Sl,a0 as yl,a1 as bl,a2 as pl,u as wl,r as L,a3 as bt,a4 as pt,a5 as se,s as wt,a6 as Cl,a7 as at,a8 as $t,a9 as Wt,aa as Kt,x as jt,ab as xl,y as Qt,ac as El,ad as kl,p as $e,ae as Tl,af as Vl,_ as ce,ag as Al,Z as Ut,ah as _e,R as ue,ai as Ct,w as Y,H as Ol,I as Be,aj as Ml,M as lt,ak as xt,al as Il,S as Ll,am as ql,an as Rl,G as _l,ao as zl,ap as Bl,aq as Hl,ar as Fl,as as Pl,at as Dl,au as Nl,av as $l,aw as Wl,ax as Et,K as Kl,ay as jl,az as Ql,aA as Ul,aB as Gl,aC as Xl,J as Yl,aD as Jl,aE as Zl,aF as en,aG as tn,aH as ln,aI as nn,aJ as kt,aK as qe,aL as an,aM as on,aN as un,aO as Te,aP as rn,aQ as sn,V as cn}from"./index.352cba8e.js";import{u as dn,v as fn,L as ae,e as vn,c as mn,d as gn,f as hn}from"./QItemLabel.24c3fbcc.js";var Fn=ze({name:"QPageContainer",setup(e,{slots:l}){const{proxy:{$q:n}}=Ae(),a=ml(hl,Je);if(a===Je)return Je;gl(Sl,!0);const i=C(()=>{const u={};return a.header.space===!0&&(u.paddingTop=`${a.header.size}px`),a.right.space===!0&&(u[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${a.right.size}px`),a.footer.space===!0&&(u.paddingBottom=`${a.footer.size}px`),a.left.space===!0&&(u[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${a.left.size}px`),u});return()=>M("div",{class:"q-page-container",style:i.value},Nt(l.default))}});const Sn=yl("user",{state:()=>({userInfo:{id:"",pw:"",role:""}}),actions:{setUserInfo(e){this.userInfo={},this.userInfo=e}},persist:{enabled:!0,strategies:[{key:"user",storage:localStorage}]}});function Pn(){const e=dn();bl();const l=pl();Sn();const n=wl(),{setLocale:a,$t:i}=n,u=L(!1),d=L(!1),g=L(null),h=L(""),p=L(0),r=L(null),S=L(""),x=async(H,w,T)=>{if(!fn(H,w))return e.notify({type:"negative",message:i(ae.ID_PW_REQUIRED)}),!1;u.value=!0;try{const k=await bt.post("/login",{mbrId:H,mbrPw:w,loginType:"BO",keepLoggedIn:T}),{requiresOtp:A,userLang:B,enterBotChat:q,botBlocked:D,telegramError:U}=k.data,Z=Number(k.data.code);return a(B||"ru"),Z===200?A?(d.value=!0,g.value=k.data.pendingToken,h.value=k.data.message||"OTP sent to your Telegram",p.value=k.data.expiresIn||300,r.value=null,S.value="",e.notify({type:"info",message:h.value}),"OTP_REQUIRED"):q?(await pt({title:i(se.NO_CHAT_TITLE),message:i(se.NO_CHAT_MESSAGE),okLabel:i(se.NO_CHAT_CONFIRM),cancelLabel:i(wt.CANCEL),onOk:()=>{window.open("https://t.me/ZionRusOfficialBot","_blank")}}),!1):D?(await pt({title:i(se.BOT_BLOCKED_TITLE),message:i(se.BOT_BLOCKED_MESSAGE),okLabel:i(se.BOT_BLOCKED_CONFIRM),cancelLabel:i(wt.CANCEL),onOk:()=>{window.open("https://t.me/ZionRusOfficialBot","_blank")}}),!1):U?(await Cl({title:i(se.SERVER_ERROR_TITLE),message:i(se.SERVER_ERROR_MESSAGE)}),!1):k.data.loginSuccess===!0?await b(k.data):F(k):F(k)}catch(k){return F(k)}finally{u.value=!1}},s=()=>{window.location.href="/"},b=async H=>{try{const w=vn(H);return l.saveUserInfo(w),w.lang&&a(w.lang),e.notify({type:"positive",message:i(ae.LOGIN_SUCCESS)}),s(),!0}catch{return e.notify({type:"negative",message:i(ae.USER_INFO_PROCESSING_ERROR)}),!1}},W=async H=>{var k,A,B;const{otpCode:w,pendingToken:T}=H;u.value=!0,S.value="";try{const q=await bt.post("/api/verify-otp",{authCode:w,pendingToken:T});return Number(q.data.code)===200&&((k=q.data)==null?void 0:k.loginSuccess)===!0?await b(q.data):!1}catch(q){if(((A=q.response)==null?void 0:A.status)===401&&((B=q.response)==null?void 0:B.data)){const{message:D,remainingAttempts:U}=q.response.data;switch(Number(q.response.data.code)){case 4002:S.value="\uC778\uC99D \uD1A0\uD070\uC774 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uC815\uBCF4\uAC00 \uC190\uC0C1\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4003:S.value="\uC778\uC99D \uD1A0\uD070 \uAC80\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uD1A0\uD070\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4004:S.value="\uC778\uC99D \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uC815\uBCF4\uAC00 \uB9CC\uB8CC\uB418\uC5C8\uAC70\uB098 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4005:S.value="\uC774\uBBF8 \uC0AC\uC6A9\uB41C \uC778\uC99D\uC785\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC774\uBBF8 \uC778\uC99D\uC774 \uC644\uB8CC\uB418\uC5C8\uAC70\uB098 \uB2E4\uB978 \uACF3\uC5D0\uC11C \uC0AC\uC6A9\uB41C \uD1A0\uD070\uC785\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4006:S.value="\uC778\uC99D \uC2DC\uAC04\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uCF54\uB4DC \uC785\uB825 \uC2DC\uAC04\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4007:S.value="\uC778\uC99D \uC2DC\uB3C4 \uD69F\uC218\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uC2DC\uB3C4 \uD69F\uC218\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4008:r.value=U,S.value=D||"Invalid authentication code",e.notify({type:"negative",message:`\uC778\uC99D \uCF54\uB4DC\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. (\uB0A8\uC740 \uC2DC\uB3C4: ${U}\uD68C)`,timeout:3e3});break;case 4009:S.value="\uC0AC\uC6A9\uC790 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC0AC\uC6A9\uC790 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;default:S.value=D||"OTP \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:D||"OTP \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."})}return!1}return e.notify({type:"negative",message:"\uC11C\uBC84 \uC5F0\uACB0\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."}),!1}finally{u.value=!1}},y=()=>{d.value=!1,g.value=null,h.value="",p.value=0,r.value=null,S.value=""},F=H=>{var k;let w=i(ae.SERVER_CONNECTION_FAILED);const T=((k=H.response)==null?void 0:k.data)||H.data;if(T!=null&&T.code){const A=Number(T.code);A===666?w=i(ae.ID_PW_INCORRECT):A===200&&!T.Authorization?w=i(ae.AUTH_INFO_INVALID):A===1001?w=i(ae.RESTRICTED):A===1002?w=i(ae.BLOCKED):w=i(ae.BLOCKED)}else H.message&&(w=i(ae.SERVER_CONNECTION_FAILED));return e.notify({type:"negative",message:w}),!1};return{login:x,verifyOtpHandler:W,cancelOtpState:y,isLoading:u,requiresOtp:d,pendingToken:g,otpMessage:h,otpExpiresIn:p,remainingAttempts:r,otpError:S}}const Se=()=>JSON.parse(localStorage.getItem("userInfo"))||{};var zt;((zt=Se())==null?void 0:zt.authCd)=="MST";var Bt,Ht;const Dn=((Bt=Se())==null?void 0:Bt.authCd)=="MST"?!0:((Ht=Se())==null?void 0:Ht.authCd)=="ADM";var Ft,Pt,Dt;((Ft=Se())==null?void 0:Ft.authCd)=="MST"||((Pt=Se())==null?void 0:Pt.authCd)=="ADM"||((Dt=Se())==null?void 0:Dt.authCd)=="MNG";const Nn=()=>{var l;switch((l=Se())==null?void 0:l.authCd){case"MST":return"admin";case"ADM":return"admin";case"MNG":return"manager";case"USR":return"user";default:return"default"}};var yn=ze({name:"QField",inheritAttrs:!1,props:{...at,tag:{type:String,default:"label"}},emits:$t,setup(){return Wt(Kt({tagProp:!0}))}});const bn={xs:8,sm:10,md:14,lg:20,xl:24};var pn=ze({name:"QChip",props:{...jt,...xl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:n}){const{proxy:{$q:a}}=Ae(),i=Qt(e,a),u=El(e,bn),d=C(()=>e.selected===!0||e.icon!==void 0),g=C(()=>e.selected===!0?e.iconSelected||a.iconSet.chip.selected:e.icon),h=C(()=>e.iconRemove||a.iconSet.chip.remove),p=C(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),r=C(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(p.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(i.value===!0?" q-chip--dark q-dark":"")}),S=C(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},F={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||a.lang.label.remove};return{chip:y,remove:F}});function x(y){y.keyCode===13&&s(y)}function s(y){e.disable||(n("update:selected",!e.selected),n("click",y))}function b(y){(y.keyCode===void 0||y.keyCode===13)&&(ce(y),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function W(){const y=[];p.value===!0&&y.push(M("div",{class:"q-focus-helper"})),d.value===!0&&y.push(M($e,{class:"q-chip__icon q-chip__icon--left",name:g.value}));const F=e.label!==void 0?[M("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(M("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Tl(l.default,F))),e.iconRight&&y.push(M($e,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(M($e,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...S.value.remove,onClick:b,onKeyup:b})),y}return()=>{if(e.modelValue===!1)return;const y={class:r.value,style:u.value};return p.value===!0&&Object.assign(y,S.value.chip,{onClick:s,onKeyup:x}),kl("div",y,W(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Vl,e.ripple]])}}});function wn(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Al.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Cn={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},xn={...Cn,contextMenu:Boolean};function En({showing:e,avoidEmit:l,configureAnchorEl:n}){const{props:a,proxy:i,emit:u}=Ae(),d=L(null);let g=null;function h(s){return d.value===null?!1:s===void 0||s.touches===void 0||s.touches.length<=1}const p={};n===void 0&&(Object.assign(p,{hide(s){i.hide(s)},toggle(s){i.toggle(s),s.qAnchorHandled=!0},toggleKey(s){Ut(s,13)===!0&&p.toggle(s)},contextClick(s){i.hide(s),_e(s),ue(()=>{i.show(s),s.qAnchorHandled=!0})},prevent:_e,mobileTouch(s){if(p.mobileCleanup(s),h(s)!==!0)return;i.hide(s),d.value.classList.add("non-selectable");const b=s.target;Ct(p,"anchor",[[b,"touchmove","mobileCleanup","passive"],[b,"touchend","mobileCleanup","passive"],[b,"touchcancel","mobileCleanup","passive"],[d.value,"contextmenu","prevent","notPassive"]]),g=setTimeout(()=>{g=null,i.show(s),s.qAnchorHandled=!0},300)},mobileCleanup(s){d.value.classList.remove("non-selectable"),g!==null&&(clearTimeout(g),g=null),e.value===!0&&s!==void 0&&wn()}}),n=function(s=a.contextMenu){if(a.noParentEvent===!0||d.value===null)return;let b;s===!0?i.$q.platform.is.mobile===!0?b=[[d.value,"touchstart","mobileTouch","passive"]]:b=[[d.value,"mousedown","hide","passive"],[d.value,"contextmenu","contextClick","notPassive"]]:b=[[d.value,"click","toggle","passive"],[d.value,"keyup","toggleKey","passive"]],Ct(p,"anchor",b)});function r(){Ml(p,"anchor")}function S(s){for(d.value=s;d.value.classList.contains("q-anchor--skip");)d.value=d.value.parentNode;n()}function x(){if(a.target===!1||a.target===""||i.$el.parentNode===null)d.value=null;else if(a.target===!0)S(i.$el.parentNode);else{let s=a.target;if(typeof a.target=="string")try{s=document.querySelector(a.target)}catch{s=void 0}s!=null?(d.value=s.$el||s,n()):d.value=null}}return Y(()=>a.contextMenu,s=>{d.value!==null&&(r(),n(s))}),Y(()=>a.target,()=>{d.value!==null&&r(),x()}),Y(()=>a.noParentEvent,s=>{d.value!==null&&(s===!0?r():n())}),Ol(()=>{x(),l!==!0&&a.modelValue===!0&&d.value===null&&u("update:modelValue",!1)}),Be(()=>{g!==null&&clearTimeout(g),r()}),{anchorEl:d,canShow:h,anchorEvents:p}}function kn(e,l){const n=L(null);let a;function i(g,h){const p=`${h!==void 0?"add":"remove"}EventListener`,r=h!==void 0?h:a;g!==window&&g[p]("scroll",r,lt.passive),window[p]("scroll",r,lt.passive),a=h}function u(){n.value!==null&&(i(n.value),n.value=null)}const d=Y(()=>e.noParentEvent,()=>{n.value!==null&&(u(),l())});return Be(d),{localScrollTarget:n,unconfigureScrollTarget:u,changeScrollEvent:i}}const{notPassiveCapture:We}=lt,ye=[];function Ke(e){const l=e.target;if(l===void 0||l.nodeType===8||l.classList.contains("no-pointer-events")===!0)return;let n=xt.length-1;for(;n>=0;){const a=xt[n].$;if(a.type.name==="QTooltip"){n--;continue}if(a.type.name!=="QDialog")break;if(a.props.seamless!==!0)return;n--}for(let a=ye.length-1;a>=0;a--){const i=ye[a];if((i.anchorEl.value===null||i.anchorEl.value.contains(l)===!1)&&(l===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(l)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function Tn(e){ye.push(e),ye.length===1&&(document.addEventListener("mousedown",Ke,We),document.addEventListener("touchstart",Ke,We))}function Tt(e){const l=ye.findIndex(n=>n===e);l!==-1&&(ye.splice(l,1),ye.length===0&&(document.removeEventListener("mousedown",Ke,We),document.removeEventListener("touchstart",Ke,We)))}let Vt,At;function Ot(e){const l=e.split(" ");return!(l.length!==2||["top","center","bottom"].includes(l[0])!==!0||["left","middle","right","start","end"].includes(l[1])!==!0)}function Vn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const nt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{nt[`${e}#ltr`]=e,nt[`${e}#rtl`]=e});function Mt(e,l){const n=e.split(" ");return{vertical:n[0],horizontal:nt[`${n[1]}#${l===!0?"rtl":"ltr"}`]}}function An(e,l){let{top:n,left:a,right:i,bottom:u,width:d,height:g}=e.getBoundingClientRect();return l!==void 0&&(n-=l[1],a-=l[0],u+=l[1],i+=l[0],d+=l[0],g+=l[1]),{top:n,bottom:u,height:g,left:a,right:i,width:d,middle:a+(i-a)/2,center:n+(u-n)/2}}function On(e,l,n){let{top:a,left:i}=e.getBoundingClientRect();return a+=l.top,i+=l.left,n!==void 0&&(a+=n[1],i+=n[0]),{top:a,bottom:a+1,height:1,left:i,right:i+1,width:1,middle:i,center:a}}function Mn(e,l){return{top:0,center:l/2,bottom:l,left:0,middle:e/2,right:e}}function It(e,l,n,a){return{top:e[n.vertical]-l[a.vertical],left:e[n.horizontal]-l[a.horizontal]}}function Gt(e,l=0){if(e.targetEl===null||e.anchorEl===null||l>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Gt(e,l+1)},10);return}const{targetEl:n,offset:a,anchorEl:i,anchorOrigin:u,selfOrigin:d,absoluteOffset:g,fit:h,cover:p,maxHeight:r,maxWidth:S}=e;if(Il.is.ios===!0&&window.visualViewport!==void 0){const A=document.body.style,{offsetLeft:B,offsetTop:q}=window.visualViewport;B!==Vt&&(A.setProperty("--q-pe-left",B+"px"),Vt=B),q!==At&&(A.setProperty("--q-pe-top",q+"px"),At=q)}const{scrollLeft:x,scrollTop:s}=n,b=g===void 0?An(i,p===!0?[0,0]:a):On(i,g,a);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:S,maxHeight:r,visibility:"visible"});const{offsetWidth:W,offsetHeight:y}=n,{elWidth:F,elHeight:H}=h===!0||p===!0?{elWidth:Math.max(b.width,W),elHeight:p===!0?Math.max(b.height,y):y}:{elWidth:W,elHeight:y};let w={maxWidth:S,maxHeight:r};(h===!0||p===!0)&&(w.minWidth=b.width+"px",p===!0&&(w.minHeight=b.height+"px")),Object.assign(n.style,w);const T=Mn(F,H);let k=It(b,T,u,d);if(g===void 0||a===void 0)Ze(k,b,T,u,d);else{const{top:A,left:B}=k;Ze(k,b,T,u,d);let q=!1;if(k.top!==A){q=!0;const D=2*a[1];b.center=b.top-=D,b.bottom-=D+2}if(k.left!==B){q=!0;const D=2*a[0];b.middle=b.left-=D,b.right-=D+2}q===!0&&(k=It(b,T,u,d),Ze(k,b,T,u,d))}w={top:k.top+"px",left:k.left+"px"},k.maxHeight!==void 0&&(w.maxHeight=k.maxHeight+"px",b.height>k.maxHeight&&(w.minHeight=w.maxHeight)),k.maxWidth!==void 0&&(w.maxWidth=k.maxWidth+"px",b.width>k.maxWidth&&(w.minWidth=w.maxWidth)),Object.assign(n.style,w),n.scrollTop!==s&&(n.scrollTop=s),n.scrollLeft!==x&&(n.scrollLeft=x)}function Ze(e,l,n,a,i){const u=n.bottom,d=n.right,g=Ll(),h=window.innerHeight-g,p=document.body.clientWidth;if(e.top<0||e.top+u>h)if(i.vertical==="center")e.top=l[a.vertical]>h/2?Math.max(0,h-u):0,e.maxHeight=Math.min(u,h);else if(l[a.vertical]>h/2){const r=Math.min(h,a.vertical==="center"?l.center:a.vertical===i.vertical?l.bottom:l.top);e.maxHeight=Math.min(u,r),e.top=Math.max(0,r-u)}else e.top=Math.max(0,a.vertical==="center"?l.center:a.vertical===i.vertical?l.top:l.bottom),e.maxHeight=Math.min(u,h-e.top);if(e.left<0||e.left+d>p)if(e.maxWidth=Math.min(d,p),i.horizontal==="middle")e.left=l[a.horizontal]>p/2?Math.max(0,p-d):0;else if(l[a.horizontal]>p/2){const r=Math.min(p,a.horizontal==="middle"?l.middle:a.horizontal===i.horizontal?l.right:l.left);e.maxWidth=Math.min(d,r),e.left=Math.max(0,r-e.maxWidth)}else e.left=Math.max(0,a.horizontal==="middle"?l.middle:a.horizontal===i.horizontal?l.left:l.right),e.maxWidth=Math.min(d,p-e.left)}var In=ze({name:"QMenu",inheritAttrs:!1,props:{...xn,...ql,...jt,...Rl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ot},self:{type:String,validator:Ot},offset:{type:Array,validator:Vn},scrollTarget:_l,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...zl,"click","escapeKey"],setup(e,{slots:l,emit:n,attrs:a}){let i=null,u,d,g;const h=Ae(),{proxy:p}=h,{$q:r}=p,S=L(null),x=L(!1),s=C(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),b=Qt(e,r),{registerTick:W,removeTick:y}=Bl(),{registerTimeout:F}=Hl(),{transitionProps:H,transitionStyle:w}=Fl(e),{localScrollTarget:T,changeScrollEvent:k,unconfigureScrollTarget:A}=kn(e,V),{anchorEl:B,canShow:q}=En({showing:x}),{hide:D}=Pl({showing:x,canShow:q,handleShow:fe,handleHide:o,hideOnRouteChange:s,processOnMount:!0}),{showPortal:U,hidePortal:Z,renderPortal:Q}=Dl(h,S,N,"menu"),oe={anchorEl:B,innerRef:S,onClickOutside(c){if(e.persistent!==!0&&x.value===!0)return D(c),(c.type==="touchstart"||c.target.classList.contains("q-dialog__backdrop"))&&ce(c),!0}},de=C(()=>Mt(e.anchor||(e.cover===!0?"center middle":"bottom start"),r.lang.rtl)),ie=C(()=>e.cover===!0?de.value:Mt(e.self||"top start",r.lang.rtl)),X=C(()=>(e.square===!0?" q-menu--square":"")+(b.value===!0?" q-menu--dark q-dark":"")),Oe=C(()=>e.autoClose===!0?{onClick:R}:{}),re=C(()=>x.value===!0&&e.persistent!==!0);Y(re,c=>{c===!0?(Gl(I),Tn(oe)):(Et(I),Tt(oe))});function ee(){Ul(()=>{let c=S.value;c&&c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))})}function fe(c){if(i=e.noRefocus===!1?document.activeElement:null,Nl(P),U(),V(),u=void 0,c!==void 0&&(e.touchPosition||e.contextMenu)){const K=$l(c);if(K.left!==void 0){const{top:te,left:be}=B.value.getBoundingClientRect();u={left:K.left-be,top:K.top-te}}}d===void 0&&(d=Y(()=>r.screen.width+"|"+r.screen.height+"|"+e.self+"|"+e.anchor+"|"+r.lang.rtl,E)),e.noFocus!==!0&&document.activeElement.blur(),W(()=>{E(),e.noFocus!==!0&&ee()}),F(()=>{r.platform.is.ios===!0&&(g=e.autoClose,S.value.click()),E(),U(!0),n("show",c)},e.transitionDuration)}function o(c){y(),Z(),f(!0),i!==null&&(c===void 0||c.qClickOutside!==!0)&&(((c&&c.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),F(()=>{Z(!0),n("hide",c)},e.transitionDuration)}function f(c){u=void 0,d!==void 0&&(d(),d=void 0),(c===!0||x.value===!0)&&(Wl(P),A(),Tt(oe),Et(I)),c!==!0&&(i=null)}function V(){(B.value!==null||e.scrollTarget!==void 0)&&(T.value=Kl(B.value,e.scrollTarget),k(T.value,E))}function R(c){g!==!0?(jl(p,c),n("click",c)):g=!1}function P(c){re.value===!0&&e.noFocus!==!0&&Xl(S.value,c.target)!==!0&&ee()}function I(c){n("escapeKey"),D(c)}function E(){Gt({targetEl:S.value,offset:e.offset,anchorEl:B.value,anchorOrigin:de.value,selfOrigin:ie.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function N(){return M(Ql,H.value,()=>x.value===!0?M("div",{role:"menu",...a,ref:S,tabindex:-1,class:["q-menu q-position-engine scroll"+X.value,a.class],style:[a.style,w.value],...Oe.value},Nt(l.default)):null)}return Be(f),Object.assign(p,{focus:ee,updatePosition:E}),Q}});let je=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,je=e.scrollLeft>=0,e.remove()}const J=1e3,Ln=["start","center","end","start-force","center-force","end-force"],Xt=Array.prototype.filter,qn=window.getComputedStyle(document.body).overflowAnchor===void 0?Yl:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Xt.call(n,i=>i.dataset&&i.dataset.qVsAnchor!==void 0).forEach(i=>{delete i.dataset.qVsAnchor});const a=n[l];a&&a.dataset&&(a.dataset.qVsAnchor="")}))};function Ve(e,l){return e+l}function et(e,l,n,a,i,u,d,g){const h=e===window?document.scrollingElement||document.documentElement:e,p=i===!0?"offsetWidth":"offsetHeight",r={scrollStart:0,scrollViewSize:-d-g,scrollMaxSize:0,offsetStart:-d,offsetEnd:-g};if(i===!0?(e===window?(r.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r.scrollViewSize+=document.documentElement.clientWidth):(r.scrollStart=h.scrollLeft,r.scrollViewSize+=h.clientWidth),r.scrollMaxSize=h.scrollWidth,u===!0&&(r.scrollStart=(je===!0?r.scrollMaxSize-r.scrollViewSize:0)-r.scrollStart)):(e===window?(r.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,r.scrollViewSize+=document.documentElement.clientHeight):(r.scrollStart=h.scrollTop,r.scrollViewSize+=h.clientHeight),r.scrollMaxSize=h.scrollHeight),n!==null)for(let S=n.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetStart+=S[p]);if(a!==null)for(let S=a.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetEnd+=S[p]);if(l!==e){const S=h.getBoundingClientRect(),x=l.getBoundingClientRect();i===!0?(r.offsetStart+=x.left-S.left,r.offsetEnd-=x.width):(r.offsetStart+=x.top-S.top,r.offsetEnd-=x.height),e!==window&&(r.offsetStart+=r.scrollStart),r.offsetEnd+=r.scrollMaxSize-r.offsetStart}return r}function Lt(e,l,n,a){l==="end"&&(l=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(a===!0&&(l=(je===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):n===!0?(a===!0&&(l=(je===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function Re(e,l,n,a){if(n>=a)return 0;const i=l.length,u=Math.floor(n/J),d=Math.floor((a-1)/J)+1;let g=e.slice(u,d).reduce(Ve,0);return n%J!==0&&(g-=l.slice(u*J,n).reduce(Ve,0)),a%J!==0&&a!==i&&(g-=l.slice(a,d*J).reduce(Ve,0)),g}const Yt={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},$n=Object.keys(Yt),qt={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Yt};function Rn({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:n,virtualScrollItemSizeComputed:a}){const i=Ae(),{props:u,emit:d,proxy:g}=i,{$q:h}=g;let p,r,S,x=[],s;const b=L(0),W=L(0),y=L({}),F=L(null),H=L(null),w=L(null),T=L({from:0,to:0}),k=C(()=>u.tableColspan!==void 0?u.tableColspan:100);a===void 0&&(a=C(()=>u.virtualScrollItemSize));const A=C(()=>a.value+";"+u.virtualScrollHorizontal),B=C(()=>A.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);Y(B,()=>{X()}),Y(A,q);function q(){ie(r,!0)}function D(o){ie(o===void 0?r:o)}function U(o,f){const V=l();if(V==null||V.nodeType===8)return;const R=et(V,n(),F.value,H.value,u.virtualScrollHorizontal,h.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);S!==R.scrollViewSize&&X(R.scrollViewSize),Q(V,R,Math.min(e.value-1,Math.max(0,parseInt(o,10)||0)),0,Ln.indexOf(f)!==-1?f:r!==-1&&o>r?"end":"start")}function Z(){const o=l();if(o==null||o.nodeType===8)return;const f=et(o,n(),F.value,H.value,u.virtualScrollHorizontal,h.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),V=e.value-1,R=f.scrollMaxSize-f.offsetStart-f.offsetEnd-W.value;if(p===f.scrollStart)return;if(f.scrollMaxSize<=0){Q(o,f,0,0);return}S!==f.scrollViewSize&&X(f.scrollViewSize),oe(T.value.from);const P=Math.floor(f.scrollMaxSize-Math.max(f.scrollViewSize,f.offsetEnd)-Math.min(s[V],f.scrollViewSize/2));if(P>0&&Math.ceil(f.scrollStart)>=P){Q(o,f,V,f.scrollMaxSize-f.offsetEnd-x.reduce(Ve,0));return}let I=0,E=f.scrollStart-f.offsetStart,N=E;if(E<=R&&E+f.scrollViewSize>=b.value)E-=b.value,I=T.value.from,N=E;else for(let c=0;E>=x[c]&&I<V;c++)E-=x[c],I+=J;for(;E>0&&I<V;)E-=s[I],E>-f.scrollViewSize?(I++,N=E):N=s[I]+E;Q(o,f,I,N)}function Q(o,f,V,R,P){const I=typeof P=="string"&&P.indexOf("-force")!==-1,E=I===!0?P.replace("-force",""):P,N=E!==void 0?E:"start";let c=Math.max(0,V-y.value[N]),K=c+y.value.total;K>e.value&&(K=e.value,c=Math.max(0,K-y.value.total)),p=f.scrollStart;const te=c!==T.value.from||K!==T.value.to;if(te===!1&&E===void 0){re(V);return}const{activeElement:be}=document,le=w.value;te===!0&&le!==null&&le!==be&&le.contains(be)===!0&&(le.addEventListener("focusout",de),setTimeout(()=>{le!==null&&le.removeEventListener("focusout",de)})),qn(le,V-c);const He=E!==void 0?s.slice(c,V).reduce(Ve,0):0;if(te===!0){const ve=K>=T.value.from&&c<=T.value.to?T.value.to:K;T.value={from:c,to:ve},b.value=Re(x,s,0,c),W.value=Re(x,s,K,e.value),requestAnimationFrame(()=>{T.value.to!==K&&p===f.scrollStart&&(T.value={from:T.value.from,to:K},W.value=Re(x,s,K,e.value))})}requestAnimationFrame(()=>{if(p!==f.scrollStart)return;te===!0&&oe(c);const ve=s.slice(c,V).reduce(Ve,0),me=ve+f.offsetStart+b.value,Fe=me+s[V];let Me=me+R;if(E!==void 0){const Qe=ve-He,Ie=f.scrollStart+Qe;Me=I!==!0&&Ie<me&&Fe<Ie+f.scrollViewSize?Ie:E==="end"?Fe-f.scrollViewSize:me-(E==="start"?0:Math.round((f.scrollViewSize-s[V])/2))}p=Me,Lt(o,Me,u.virtualScrollHorizontal,h.lang.rtl),re(V)})}function oe(o){const f=w.value;if(f){const V=Xt.call(f.children,c=>c.classList&&c.classList.contains("q-virtual-scroll--skip")===!1),R=V.length,P=u.virtualScrollHorizontal===!0?c=>c.getBoundingClientRect().width:c=>c.offsetHeight;let I=o,E,N;for(let c=0;c<R;){for(E=P(V[c]),c++;c<R&&V[c].classList.contains("q-virtual-scroll--with-prev")===!0;)E+=P(V[c]),c++;N=E-s[I],N!==0&&(s[I]+=N,x[Math.floor(I/J)]+=N),I++}}}function de(){w.value!==null&&w.value!==void 0&&w.value.focus()}function ie(o,f){const V=1*a.value;(f===!0||Array.isArray(s)===!1)&&(s=[]);const R=s.length;s.length=e.value;for(let I=e.value-1;I>=R;I--)s[I]=V;const P=Math.floor((e.value-1)/J);x=[];for(let I=0;I<=P;I++){let E=0;const N=Math.min((I+1)*J,e.value);for(let c=I*J;c<N;c++)E+=s[c];x.push(E)}r=-1,p=void 0,b.value=Re(x,s,0,T.value.from),W.value=Re(x,s,T.value.to,e.value),o>=0?(oe(T.value.from),ue(()=>{U(o)})):ee()}function X(o){if(o===void 0&&typeof window!="undefined"){const E=l();E!=null&&E.nodeType!==8&&(o=et(E,n(),F.value,H.value,u.virtualScrollHorizontal,h.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}S=o;const f=parseFloat(u.virtualScrollSliceRatioBefore)||0,V=parseFloat(u.virtualScrollSliceRatioAfter)||0,R=1+f+V,P=o===void 0||o<=0?1:Math.ceil(o/a.value),I=Math.max(1,P,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/R));y.value={total:Math.ceil(I*R),start:Math.ceil(I*f),center:Math.ceil(I*(.5+f)),end:Math.ceil(I*(1+f)),view:P}}function Oe(o,f){const V=u.virtualScrollHorizontal===!0?"width":"height",R={["--q-virtual-scroll-item-"+V]:a.value+"px"};return[o==="tbody"?M(o,{class:"q-virtual-scroll__padding",key:"before",ref:F},[M("tr",[M("td",{style:{[V]:`${b.value}px`,...R},colspan:k.value})])]):M(o,{class:"q-virtual-scroll__padding",key:"before",ref:F,style:{[V]:`${b.value}px`,...R}}),M(o,{class:"q-virtual-scroll__content",key:"content",ref:w,tabindex:-1},f.flat()),o==="tbody"?M(o,{class:"q-virtual-scroll__padding",key:"after",ref:H},[M("tr",[M("td",{style:{[V]:`${W.value}px`,...R},colspan:k.value})])]):M(o,{class:"q-virtual-scroll__padding",key:"after",ref:H,style:{[V]:`${W.value}px`,...R}})]}function re(o){r!==o&&(u.onVirtualScroll!==void 0&&d("virtualScroll",{index:o,from:T.value.from,to:T.value.to-1,direction:o<r?"decrease":"increase",ref:g}),r=o)}X();const ee=Jl(Z,h.platform.is.ios===!0?120:35);Zl(()=>{X()});let fe=!1;return en(()=>{fe=!0}),tn(()=>{if(fe!==!0)return;const o=l();p!==void 0&&o!==void 0&&o!==null&&o.nodeType!==8?Lt(o,p,u.virtualScrollHorizontal,h.lang.rtl):U(r)}),Be(()=>{ee.cancel()}),Object.assign(g,{scrollTo:U,reset:q,refresh:D}),{virtualScrollSliceRange:T,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:X,onVirtualScrollEvt:ee,localResetVirtualScroll:ie,padVirtualScroll:Oe,scrollTo:U,reset:q,refresh:D}}function Wn(e,l,n){return n<=l?l:Math.min(n,Math.max(l,e))}function Rt(e,l,n){if(n<=l)return l;const a=n-l+1;let i=l+(e-l)%a;return i<l&&(i=a+i),i===0?0:i}function Kn(e,l=2,n="0"){if(e==null)return e;const a=""+e;return a.length>=l?a:new Array(l-a.length+1).join(n)+a}const _t=e=>["add","add-unique","toggle"].includes(e),_n=".*+?^${}()|[]\\",zn=Object.keys(at);function tt(e,l){if(typeof e=="function")return e;const n=e!==void 0?e:l;return a=>a!==null&&typeof a=="object"&&n in a?a[n]:a}var jn=ze({name:"QSelect",inheritAttrs:!1,props:{...qt,...ln,...at,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:_t},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:qt.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...$t,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:l,emit:n}){const{proxy:a}=Ae(),{$q:i}=a,u=L(!1),d=L(!1),g=L(-1),h=L(""),p=L(!1),r=L(!1);let S=null,x=null,s,b,W,y=null,F,H,w,T;const k=L(null),A=L(null),B=L(null),q=L(null),D=L(null),U=nn(e),Z=un(mt),Q=C(()=>Array.isArray(e.options)?e.options.length:0),oe=C(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:de,virtualScrollSliceSizeComputed:ie,localResetVirtualScroll:X,padVirtualScroll:Oe,onVirtualScrollEvt:re,scrollTo:ee,setVirtualScrollSize:fe}=Rn({virtualScrollLength:Q,getVirtualScrollTarget:tl,getVirtualScrollEl:ft,virtualScrollItemSizeComputed:oe}),o=Kt(),f=C(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,v=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const m=e.mapOptions===!0&&s!==void 0?s:[],O=v.map(z=>el(z,m));return e.modelValue===null&&t===!0?O.filter(z=>z!==null):O}return v}),V=C(()=>{const t={};return zn.forEach(v=>{const m=e[v];m!==void 0&&(t[v]=m)}),t}),R=C(()=>e.optionsDark===null?o.isDark.value:e.optionsDark),P=C(()=>kt(f.value)),I=C(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||f.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),E=C(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),N=C(()=>Q.value===0),c=C(()=>f.value.map(t=>G.value(t)).join(", ")),K=C(()=>e.displayValue!==void 0?e.displayValue:c.value),te=C(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),be=C(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||f.value.some(te.value))),le=C(()=>o.focused.value===!0?e.tabindex:-1),He=C(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${o.targetUid.value}_lb`};return g.value>=0&&(t["aria-activedescendant"]=`${o.targetUid.value}_${g.value}`),t}),ve=C(()=>({id:`${o.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),me=C(()=>f.value.map((t,v)=>({index:v,opt:t,html:te.value(t),selected:!0,removeAtIndex:Zt,toggleOption:ge,tabindex:le.value}))),Fe=C(()=>{if(Q.value===0)return[];const{from:t,to:v}=de.value;return e.options.slice(t,v).map((m,O)=>{const z=pe.value(m)===!0,_=Ge(m)===!0,j=t+O,$={clickable:!0,active:_,activeClass:Ie.value,manualFocus:!0,focused:!1,disable:z,tabindex:-1,dense:e.optionsDense,dark:R.value,role:"option","aria-selected":_===!0?"true":"false",id:`${o.targetUid.value}_${j}`,onClick:()=>{ge(m)}};return z!==!0&&(g.value===j&&($.focused=!0),i.platform.is.desktop===!0&&($.onMousemove=()=>{u.value===!0&&we(j)})),{index:j,opt:m,html:te.value(m),label:G.value(m),selected:$.active,focused:$.focused,toggleOption:ge,setOptionIndex:we,itemProps:$}})}),Me=C(()=>e.dropdownIcon!==void 0?e.dropdownIcon:i.iconSet.arrow.dropdown),Qe=C(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ie=C(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ne=C(()=>tt(e.optionValue,"value")),G=C(()=>tt(e.optionLabel,"label")),pe=C(()=>tt(e.optionDisable,"disable")),Pe=C(()=>f.value.map(ne.value)),Jt=C(()=>{const t={onInput:mt,onChange:Z,onKeydown:dt,onKeyup:st,onKeypress:ct,onFocus:it,onClick(v){b===!0&&Te(v)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Z,t});Y(f,t=>{s=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&o.innerLoading.value!==!0&&(d.value!==!0&&u.value!==!0||P.value!==!0)&&(W!==!0&&ke(),(d.value===!0||u.value===!0)&&Ce(""))},{immediate:!0}),Y(()=>e.fillInput,ke),Y(u,Xe),Y(Q,vl);function ot(t){return e.emitValue===!0?ne.value(t):t}function Ue(t){if(t!==-1&&t<f.value.length)if(e.multiple===!0){const v=e.modelValue.slice();n("remove",{index:t,value:v.splice(t,1)[0]}),n("update:modelValue",v)}else n("update:modelValue",null)}function Zt(t){Ue(t),o.focus()}function ut(t,v){const m=ot(t);if(e.multiple!==!0){e.fillInput===!0&&Le(G.value(t),!0,!0),n("update:modelValue",m);return}if(f.value.length===0){n("add",{index:0,value:m}),n("update:modelValue",e.multiple===!0?[m]:m);return}if(v===!0&&Ge(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const O=e.modelValue.slice();n("add",{index:O.length,value:m}),O.push(m),n("update:modelValue",O)}function ge(t,v){if(o.editable.value!==!0||t===void 0||pe.value(t)===!0)return;const m=ne.value(t);if(e.multiple!==!0){v!==!0&&(Le(e.fillInput===!0?G.value(t):"",!0,!0),he()),A.value!==null&&A.value.focus(),(f.value.length===0||qe(ne.value(f.value[0]),m)!==!0)&&n("update:modelValue",e.emitValue===!0?m:t);return}if((b!==!0||p.value===!0)&&o.focus(),it(),f.value.length===0){const _=e.emitValue===!0?m:t;n("add",{index:0,value:_}),n("update:modelValue",e.multiple===!0?[_]:_);return}const O=e.modelValue.slice(),z=Pe.value.findIndex(_=>qe(_,m));if(z!==-1)n("remove",{index:z,value:O.splice(z,1)[0]});else{if(e.maxValues!==void 0&&O.length>=e.maxValues)return;const _=e.emitValue===!0?m:t;n("add",{index:O.length,value:_}),O.push(_)}n("update:modelValue",O)}function we(t){if(i.platform.is.desktop!==!0)return;const v=t!==-1&&t<Q.value?t:-1;g.value!==v&&(g.value=v)}function De(t=1,v){if(u.value===!0){let m=g.value;do m=Rt(m+t,-1,Q.value-1);while(m!==-1&&m!==g.value&&pe.value(e.options[m])===!0);g.value!==m&&(we(m),ee(m),v!==!0&&e.useInput===!0&&e.fillInput===!0&&Ne(m>=0?G.value(e.options[m]):F,!0))}}function el(t,v){const m=O=>qe(ne.value(O),t);return e.options.find(m)||v.find(m)||t}function Ge(t){const v=ne.value(t);return Pe.value.find(m=>qe(m,v))!==void 0}function it(t){e.useInput===!0&&A.value!==null&&(t===void 0||A.value===t.target&&t.target.value===c.value)&&A.value.select()}function rt(t){Ut(t,27)===!0&&u.value===!0&&(Te(t),he(),ke()),n("keyup",t)}function st(t){const{value:v}=t.target;if(t.keyCode!==void 0){rt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),x!==null&&(clearTimeout(x),x=null),ke(),typeof v=="string"&&v.length!==0){const m=v.toLocaleLowerCase(),O=_=>{const j=e.options.find($=>String(_.value($)).toLocaleLowerCase()===m);return j===void 0?!1:(f.value.indexOf(j)===-1?ge(j):he(),!0)},z=_=>{O(ne)!==!0&&_!==!0&&O(G)!==!0&&Ce(v,!0,()=>z(!0))};z()}else o.clearValue(t)}function ct(t){n("keypress",t)}function dt(t){if(n("keydown",t),rn(t)===!0)return;const v=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),m=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(g.value!==-1||v===!0);if(t.keyCode===27){_e(t);return}if(t.keyCode===9&&m===!1){xe();return}if(t.target===void 0||t.target.id!==o.targetUid.value||o.editable.value!==!0)return;if(t.keyCode===40&&o.innerLoading.value!==!0&&u.value===!1){ce(t),Ee();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ue(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(ce(t),g.value=-1,De(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ie.value!==void 0&&(ce(t),g.value=Math.max(-1,Math.min(Q.value,g.value+(t.keyCode===33?-1:1)*ie.value.view)),De(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ce(t),De(t.keyCode===38?-1:1,e.multiple));const O=Q.value;if((w===void 0||T<Date.now())&&(w=""),O>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||w.length!==0)){u.value!==!0&&Ee(t);const z=t.key.toLocaleLowerCase(),_=w.length===1&&w[0]===z;T=Date.now()+1500,_===!1&&(ce(t),w+=z);const j=new RegExp("^"+w.split("").map(Ye=>_n.indexOf(Ye)!==-1?"\\"+Ye:Ye).join(".*"),"i");let $=g.value;if(_===!0||$<0||j.test(G.value(e.options[$]))!==!0)do $=Rt($+1,-1,O-1);while($!==g.value&&(pe.value(e.options[$])===!0||j.test(G.value(e.options[$]))!==!0));g.value!==$&&ue(()=>{we($),ee($),$>=0&&e.useInput===!0&&e.fillInput===!0&&Ne(G.value(e.options[$]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||w!=="")&&(t.keyCode!==9||m===!1))){if(t.keyCode!==9&&ce(t),g.value!==-1&&g.value<O){ge(e.options[g.value]);return}if(v===!0){const z=(_,j)=>{if(j){if(_t(j)!==!0)return}else j=e.newValueMode;if(Le("",e.multiple!==!0,!0),_==null)return;(j==="toggle"?ge:ut)(_,j==="add-unique"),e.multiple!==!0&&(A.value!==null&&A.value.focus(),he())};if(e.onNewValue!==void 0?n("newValue",h.value,z):z(h.value),e.multiple!==!0)return}u.value===!0?xe():o.innerLoading.value!==!0&&Ee()}}function ft(){return b===!0?D.value:B.value!==null&&B.value.contentEl!==null?B.value.contentEl:void 0}function tl(){return ft()}function ll(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?me.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?me.value.map((t,v)=>M(pn,{key:"option-"+v,removable:o.editable.value===!0&&pe.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:le.value,onRemove(){t.removeAtIndex(v)}},()=>M("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:G.value(t.opt)}))):[M("span",{[be.value===!0?"innerHTML":"textContent"]:K.value})]}function vt(){if(N.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:h.value}):void 0;const t=l.option!==void 0?l.option:m=>M(hn,{key:m.index,...m.itemProps},()=>M(mn,()=>M(gn,()=>M("span",{[m.html===!0?"innerHTML":"textContent"]:m.label}))));let v=Oe("div",Fe.value.map(t));return l["before-options"]!==void 0&&(v=l["before-options"]().concat(v)),cn(l["after-options"],v)}function nl(t,v){const m=v===!0?{...He.value,...o.splitAttrs.attributes.value}:void 0,O={ref:v===!0?A:void 0,key:"i_t",class:I.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...m,id:v===!0?o.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Jt.value};return t!==!0&&b===!0&&(Array.isArray(O.class)===!0?O.class=[...O.class,"no-pointer-events"]:O.class+=" no-pointer-events"),M("input",O)}function mt(t){S!==null&&(clearTimeout(S),S=null),x!==null&&(clearTimeout(x),x=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ne(t.target.value||""),W=!0,F=h.value,o.focused.value!==!0&&(b!==!0||p.value===!0)&&o.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,Ce(h.value)},e.inputDebounce)))}function Ne(t,v){h.value!==t&&(h.value=t,v===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",t):x=setTimeout(()=>{x=null,n("inputValue",t)},e.inputDebounce))}function Le(t,v,m){W=m!==!0,e.useInput===!0&&(Ne(t,!0),(v===!0||m!==!0)&&(F=t),v!==!0&&Ce(t))}function Ce(t,v,m){if(e.onFilter===void 0||v!==!0&&o.focused.value!==!0)return;o.innerLoading.value===!0?n("filterAbort"):(o.innerLoading.value=!0,r.value=!0),t!==""&&e.multiple!==!0&&f.value.length!==0&&W!==!0&&t===G.value(f.value[0])&&(t="");const O=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);y!==null&&clearTimeout(y),y=O,n("filter",t,(z,_)=>{(v===!0||o.focused.value===!0)&&y===O&&(clearTimeout(y),typeof z=="function"&&z(),r.value=!1,ue(()=>{o.innerLoading.value=!1,o.editable.value===!0&&(v===!0?u.value===!0&&he():u.value===!0?Xe(!0):u.value=!0),typeof _=="function"&&ue(()=>{_(a)}),typeof m=="function"&&ue(()=>{m(a)})}))},()=>{o.focused.value===!0&&y===O&&(clearTimeout(y),o.innerLoading.value=!1,r.value=!1),u.value===!0&&(u.value=!1)})}function al(){return M(In,{ref:B,class:E.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&N.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:R.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Qe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ve.value,onScrollPassive:re,onBeforeShow:ht,onBeforeHide:ol,onShow:ul},vt)}function ol(t){St(t),xe()}function ul(){fe()}function il(t){Te(t),A.value!==null&&A.value.focus(),p.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function rl(t){Te(t),ue(()=>{p.value=!1})}function sl(){const t=[M(yn,{class:`col-auto ${o.fieldClass.value}`,...V.value,for:o.targetUid.value,dark:R.value,square:!0,loading:r.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...o.splitAttrs.listeners.value,onFocus:il,onBlur:rl},{...l,rawControl:()=>o.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(M("div",{ref:D,class:E.value+" scroll",style:e.popupContentStyle,...ve.value,onClick:_e,onScrollPassive:re},vt())),M(sn,{ref:q,modelValue:d.value,position:e.useInput===!0?"top":void 0,transitionShow:H,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:ht,onBeforeHide:cl,onHide:dl,onShow:fl},()=>M("div",{class:"q-select__dialog"+(R.value===!0?" q-select__dialog--dark q-dark":"")+(p.value===!0?" q-select__dialog--focused":"")},t))}function cl(t){St(t),q.value!==null&&q.value.__updateRefocusTarget(o.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),o.focused.value=!1}function dl(t){he(),o.focused.value===!1&&n("blur",t),ke()}function fl(){const t=document.activeElement;(t===null||t.id!==o.targetUid.value)&&A.value!==null&&A.value!==t&&A.value.focus(),fe()}function xe(){d.value!==!0&&(g.value=-1,u.value===!0&&(u.value=!1),o.focused.value===!1&&(y!==null&&(clearTimeout(y),y=null),o.innerLoading.value===!0&&(n("filterAbort"),o.innerLoading.value=!1,r.value=!1)))}function Ee(t){o.editable.value===!0&&(b===!0?(o.onControlFocusin(t),d.value=!0,ue(()=>{o.focus()})):o.focus(),e.onFilter!==void 0?Ce(h.value):(N.value!==!0||l["no-option"]!==void 0)&&(u.value=!0))}function he(){d.value=!1,xe()}function ke(){e.useInput===!0&&Le(e.multiple!==!0&&e.fillInput===!0&&f.value.length!==0&&G.value(f.value[0])||"",!0,!0)}function Xe(t){let v=-1;if(t===!0){if(f.value.length!==0){const m=ne.value(f.value[0]);v=e.options.findIndex(O=>qe(ne.value(O),m))}X(v)}we(v)}function vl(t,v){u.value===!0&&o.innerLoading.value===!1&&(X(-1,!0),ue(()=>{u.value===!0&&o.innerLoading.value===!1&&(t>v?X():Xe(!0))}))}function gt(){d.value===!1&&B.value!==null&&B.value.updatePosition()}function ht(t){t!==void 0&&Te(t),n("popupShow",t),o.hasPopupOpen=!0,o.onControlFocusin(t)}function St(t){t!==void 0&&Te(t),n("popupHide",t),o.hasPopupOpen=!1,o.onControlFocusout(t)}function yt(){b=i.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||N.value===!1:!0),H=i.platform.is.ios===!0&&b===!0&&e.useInput===!0?"fade":e.transitionShow}return an(yt),on(gt),yt(),Be(()=>{S!==null&&clearTimeout(S),x!==null&&clearTimeout(x)}),Object.assign(a,{showPopup:Ee,hidePopup:he,removeAtIndex:Ue,add:ut,toggleOption:ge,getOptionIndex:()=>g.value,setOptionIndex:we,moveOptionSelection:De,filter:Ce,updateMenuPosition:gt,updateInputValue:Le,isOptionSelected:Ge,getEmittingOptionValue:ot,isOptionDisabled:(...t)=>pe.value.apply(null,t)===!0,getOptionValue:(...t)=>ne.value.apply(null,t),getOptionLabel:(...t)=>G.value.apply(null,t)}),Object.assign(o,{innerValue:f,fieldClass:C(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:k,targetRef:A,hasValue:P,showPopup:Ee,floatingLabel:C(()=>e.hideSelected!==!0&&P.value===!0||typeof h.value=="number"||h.value.length!==0||kt(e.displayValue)),getControlChild:()=>{if(o.editable.value!==!1&&(d.value===!0||N.value!==!0||l["no-option"]!==void 0))return b===!0?sl():al();o.hasPopupOpen===!0&&(o.hasPopupOpen=!1)},controlEvents:{onFocusin(t){o.onControlFocusin(t)},onFocusout(t){o.onControlFocusout(t,()=>{ke(),xe()})},onClick(t){if(_e(t),b!==!0&&u.value===!0){xe(),A.value!==null&&A.value.focus();return}Ee(t)}},getControl:t=>{const v=ll(),m=t===!0||d.value!==!0||b!==!0;if(e.useInput===!0)v.push(nl(t,m));else if(o.editable.value===!0){const z=m===!0?He.value:void 0;v.push(M("input",{ref:m===!0?A:void 0,key:"d_t",class:"q-select__focus-target",id:m===!0?o.targetUid.value:void 0,value:K.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...z,onKeydown:dt,onKeyup:rt,onKeypress:ct})),m===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&v.push(M("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:st}))}if(U.value!==void 0&&e.disable!==!0&&Pe.value.length!==0){const z=Pe.value.map(_=>M("option",{value:_,selected:!0}));v.push(M("select",{class:"hidden",name:U.value,multiple:e.multiple},z))}const O=e.useInput===!0||m!==!0?void 0:o.splitAttrs.attributes.value;return M("div",{class:"q-field__native row items-center",...O,...o.splitAttrs.listeners.value},v)},getInnerAppend:()=>e.loading!==!0&&r.value!==!0&&e.hideDropdownIcon!==!0?[M($e,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:Me.value})]:null}),Wt(o)}});export{Fn as Q,jn as a,Wn as b,wn as c,In as d,qt as e,Rn as f,$n as g,pn as h,Cn as i,Vn as j,kn as k,En as l,Tt as m,Tn as n,Kn as o,Mt as p,Dn as q,je as r,Gt as s,Nn as t,Pn as u,Ot as v,Se as w};
