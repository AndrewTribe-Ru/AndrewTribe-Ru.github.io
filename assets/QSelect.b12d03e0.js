import{u as fl,v as vl,L as oe,e as ml,d as gl,f as hl,g as Sl}from"./QItemLabel.716a99ae.js";import{a1 as yl,c as bl,a2 as wl,u as Cl,r as q,a3 as yt,a4 as bt,a5 as se,v as wt,a6 as pl,x as je,a7 as nt,a8 as Dt,a9 as Nt,aa as Wt,y as $t,ab as xl,z as Kt,ac as El,d as x,ad as kl,C as _e,A as I,q as Ne,ae as Tl,af as Vl,$ as ce,ag as Al,_ as jt,ah as Re,T as ue,ai as Ct,w as Y,J as Ol,K as ze,aj as Ml,O as tt,ak as pt,al as Il,U as ql,am as Ll,an as Rl,I as _l,ao as zl,ap as Bl,aq as Hl,ar as Fl,as as Pl,at as Dl,au as Nl,av as Wl,aw as $l,ax as xt,N as Kl,ay as jl,B as Ul,az as Ql,aA as Gl,aB as Xl,aC as Yl,M as Jl,aD as Zl,aE as en,aF as tn,aG as ln,aH as nn,aI as on,aJ as Et,aK as qe,aL as an,aM as un,aN as rn,aO as Te,aP as sn,aQ as cn,W as dn}from"./index.40fd5595.js";const fn=yl("user",{state:()=>({userInfo:{id:"",pw:"",role:""}}),actions:{setUserInfo(e){this.userInfo={},this.userInfo=e}},persist:{enabled:!0,strategies:[{key:"user",storage:localStorage}]}});function Rn(){const e=fl();bl();const l=wl();fn();const n=Cl(),{setLocale:o,$t:u}=n,i=q(!1),d=q(!1),g=q(null),h=q(""),w=q(0),r=q(null),S=q(""),p=async(H,C,T)=>{if(!vl(H,C))return e.notify({type:"negative",message:u(oe.ID_PW_REQUIRED)}),!1;i.value=!0;try{const k=await yt.post("/login",{mbrId:H,mbrPw:C,loginType:"BO",keepLoggedIn:T}),{requiresOtp:A,userLang:B,enterBotChat:L,botBlocked:D,telegramError:Q}=k.data,Z=Number(k.data.code);return o(B||"ru"),Z===200?A?(d.value=!0,g.value=k.data.pendingToken,h.value=k.data.message||"OTP sent to your Telegram",w.value=k.data.expiresIn||300,r.value=null,S.value="",e.notify({type:"info",message:h.value}),"OTP_REQUIRED"):L?(await bt({title:u(se.NO_CHAT_TITLE),message:u(se.NO_CHAT_MESSAGE),okLabel:u(se.NO_CHAT_CONFIRM),cancelLabel:u(wt.CANCEL),onOk:()=>{window.open("https://t.me/ZionRusOfficialBot","_blank")}}),!1):D?(await bt({title:u(se.BOT_BLOCKED_TITLE),message:u(se.BOT_BLOCKED_MESSAGE),okLabel:u(se.BOT_BLOCKED_CONFIRM),cancelLabel:u(wt.CANCEL),onOk:()=>{window.open("https://t.me/ZionRusOfficialBot","_blank")}}),!1):Q?(await pl({title:u(se.SERVER_ERROR_TITLE),message:u(se.SERVER_ERROR_MESSAGE)}),!1):k.data.loginSuccess===!0?await b(k.data):F(k):F(k)}catch(k){return F(k)}finally{i.value=!1}},s=()=>{window.location.href="/"},b=async H=>{try{const C=ml(H);return l.saveUserInfo(C),C.lang&&o(C.lang),e.notify({type:"positive",message:u(oe.LOGIN_SUCCESS)}),s(),!0}catch{return e.notify({type:"negative",message:u(oe.USER_INFO_PROCESSING_ERROR)}),!1}},$=async H=>{var k,A,B;const{otpCode:C,pendingToken:T}=H;i.value=!0,S.value="";try{const L=await yt.post("/api/verify-otp",{authCode:C,pendingToken:T});return Number(L.data.code)===200&&((k=L.data)==null?void 0:k.loginSuccess)===!0?await b(L.data):!1}catch(L){if(((A=L.response)==null?void 0:A.status)===401&&((B=L.response)==null?void 0:B.data)){const{message:D,remainingAttempts:Q}=L.response.data;switch(Number(L.response.data.code)){case 4002:S.value="\uC778\uC99D \uD1A0\uD070\uC774 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uC815\uBCF4\uAC00 \uC190\uC0C1\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4003:S.value="\uC778\uC99D \uD1A0\uD070 \uAC80\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uD1A0\uD070\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4004:S.value="\uC778\uC99D \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uC815\uBCF4\uAC00 \uB9CC\uB8CC\uB418\uC5C8\uAC70\uB098 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4005:S.value="\uC774\uBBF8 \uC0AC\uC6A9\uB41C \uC778\uC99D\uC785\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC774\uBBF8 \uC778\uC99D\uC774 \uC644\uB8CC\uB418\uC5C8\uAC70\uB098 \uB2E4\uB978 \uACF3\uC5D0\uC11C \uC0AC\uC6A9\uB41C \uD1A0\uD070\uC785\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4006:S.value="\uC778\uC99D \uC2DC\uAC04\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uCF54\uB4DC \uC785\uB825 \uC2DC\uAC04\uC774 \uCD08\uACFC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4007:S.value="\uC778\uC99D \uC2DC\uB3C4 \uD69F\uC218\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC778\uC99D \uC2DC\uB3C4 \uD69F\uC218\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;case 4008:r.value=Q,S.value=D||"Invalid authentication code",e.notify({type:"negative",message:`\uC778\uC99D \uCF54\uB4DC\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. (\uB0A8\uC740 \uC2DC\uB3C4: ${Q}\uD68C)`,timeout:3e3});break;case 4009:S.value="\uC0AC\uC6A9\uC790 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:"\uC0AC\uC6A9\uC790 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758\uD574\uC8FC\uC138\uC694.",timeout:4e3}),setTimeout(()=>{y()},1e3);break;default:S.value=D||"OTP \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",e.notify({type:"negative",message:D||"OTP \uC778\uC99D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."})}return!1}return e.notify({type:"negative",message:"\uC11C\uBC84 \uC5F0\uACB0\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."}),!1}finally{i.value=!1}},y=()=>{d.value=!1,g.value=null,h.value="",w.value=0,r.value=null,S.value=""},F=H=>{var k;let C=u(oe.SERVER_CONNECTION_FAILED);const T=((k=H.response)==null?void 0:k.data)||H.data;if(T!=null&&T.code){const A=Number(T.code);A===666?C=u(oe.ID_PW_INCORRECT):A===200&&!T.Authorization?C=u(oe.AUTH_INFO_INVALID):A===1001?C=u(oe.RESTRICTED):A===1002?C=u(oe.BLOCKED):C=u(oe.BLOCKED)}else H.message&&(C=u(oe.SERVER_CONNECTION_FAILED));return e.notify({type:"negative",message:C}),!1};return{login:p,verifyOtpHandler:$,cancelOtpState:y,isLoading:i,requiresOtp:d,pendingToken:g,otpMessage:h,otpExpiresIn:w,remainingAttempts:r,otpError:S}}const Se=()=>JSON.parse(localStorage.getItem("userInfo"))||{};var _t;((_t=Se())==null?void 0:_t.authCd)=="MST";var zt,Bt;const _n=((zt=Se())==null?void 0:zt.authCd)=="MST"?!0:((Bt=Se())==null?void 0:Bt.authCd)=="ADM";var Ht,Ft,Pt;((Ht=Se())==null?void 0:Ht.authCd)=="MST"||((Ft=Se())==null?void 0:Ft.authCd)=="ADM"||((Pt=Se())==null?void 0:Pt.authCd)=="MNG";const zn=()=>{var l;switch((l=Se())==null?void 0:l.authCd){case"MST":return"admin";case"ADM":return"admin";case"MNG":return"manager";case"USR":return"user";default:return"default"}};var vn=je({name:"QField",inheritAttrs:!1,props:{...nt,tag:{type:String,default:"label"}},emits:Dt,setup(){return Nt(Wt({tagProp:!0}))}});const mn={xs:8,sm:10,md:14,lg:20,xl:24};var gn=je({name:"QChip",props:{...$t,...xl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:n}){const{proxy:{$q:o}}=_e(),u=Kt(e,o),i=El(e,mn),d=x(()=>e.selected===!0||e.icon!==void 0),g=x(()=>e.selected===!0?e.iconSelected||o.iconSet.chip.selected:e.icon),h=x(()=>e.iconRemove||o.iconSet.chip.remove),w=x(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),r=x(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(w.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(u.value===!0?" q-chip--dark q-dark":"")}),S=x(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},F={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||o.lang.label.remove};return{chip:y,remove:F}});function p(y){y.keyCode===13&&s(y)}function s(y){e.disable||(n("update:selected",!e.selected),n("click",y))}function b(y){(y.keyCode===void 0||y.keyCode===13)&&(ce(y),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function $(){const y=[];w.value===!0&&y.push(I("div",{class:"q-focus-helper"})),d.value===!0&&y.push(I(Ne,{class:"q-chip__icon q-chip__icon--left",name:g.value}));const F=e.label!==void 0?[I("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(I("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Tl(l.default,F))),e.iconRight&&y.push(I(Ne,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(I(Ne,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...S.value.remove,onClick:b,onKeyup:b})),y}return()=>{if(e.modelValue===!1)return;const y={class:r.value,style:i.value};return w.value===!0&&Object.assign(y,S.value.chip,{onClick:s,onKeyup:p}),kl("div",y,$(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Vl,e.ripple]])}}});function hn(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Al.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Sn={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},yn={...Sn,contextMenu:Boolean};function bn({showing:e,avoidEmit:l,configureAnchorEl:n}){const{props:o,proxy:u,emit:i}=_e(),d=q(null);let g=null;function h(s){return d.value===null?!1:s===void 0||s.touches===void 0||s.touches.length<=1}const w={};n===void 0&&(Object.assign(w,{hide(s){u.hide(s)},toggle(s){u.toggle(s),s.qAnchorHandled=!0},toggleKey(s){jt(s,13)===!0&&w.toggle(s)},contextClick(s){u.hide(s),Re(s),ue(()=>{u.show(s),s.qAnchorHandled=!0})},prevent:Re,mobileTouch(s){if(w.mobileCleanup(s),h(s)!==!0)return;u.hide(s),d.value.classList.add("non-selectable");const b=s.target;Ct(w,"anchor",[[b,"touchmove","mobileCleanup","passive"],[b,"touchend","mobileCleanup","passive"],[b,"touchcancel","mobileCleanup","passive"],[d.value,"contextmenu","prevent","notPassive"]]),g=setTimeout(()=>{g=null,u.show(s),s.qAnchorHandled=!0},300)},mobileCleanup(s){d.value.classList.remove("non-selectable"),g!==null&&(clearTimeout(g),g=null),e.value===!0&&s!==void 0&&hn()}}),n=function(s=o.contextMenu){if(o.noParentEvent===!0||d.value===null)return;let b;s===!0?u.$q.platform.is.mobile===!0?b=[[d.value,"touchstart","mobileTouch","passive"]]:b=[[d.value,"mousedown","hide","passive"],[d.value,"contextmenu","contextClick","notPassive"]]:b=[[d.value,"click","toggle","passive"],[d.value,"keyup","toggleKey","passive"]],Ct(w,"anchor",b)});function r(){Ml(w,"anchor")}function S(s){for(d.value=s;d.value.classList.contains("q-anchor--skip");)d.value=d.value.parentNode;n()}function p(){if(o.target===!1||o.target===""||u.$el.parentNode===null)d.value=null;else if(o.target===!0)S(u.$el.parentNode);else{let s=o.target;if(typeof o.target=="string")try{s=document.querySelector(o.target)}catch{s=void 0}s!=null?(d.value=s.$el||s,n()):d.value=null}}return Y(()=>o.contextMenu,s=>{d.value!==null&&(r(),n(s))}),Y(()=>o.target,()=>{d.value!==null&&r(),p()}),Y(()=>o.noParentEvent,s=>{d.value!==null&&(s===!0?r():n())}),Ol(()=>{p(),l!==!0&&o.modelValue===!0&&d.value===null&&i("update:modelValue",!1)}),ze(()=>{g!==null&&clearTimeout(g),r()}),{anchorEl:d,canShow:h,anchorEvents:w}}function wn(e,l){const n=q(null);let o;function u(g,h){const w=`${h!==void 0?"add":"remove"}EventListener`,r=h!==void 0?h:o;g!==window&&g[w]("scroll",r,tt.passive),window[w]("scroll",r,tt.passive),o=h}function i(){n.value!==null&&(u(n.value),n.value=null)}const d=Y(()=>e.noParentEvent,()=>{n.value!==null&&(i(),l())});return ze(d),{localScrollTarget:n,unconfigureScrollTarget:i,changeScrollEvent:u}}const{notPassiveCapture:We}=tt,ye=[];function $e(e){const l=e.target;if(l===void 0||l.nodeType===8||l.classList.contains("no-pointer-events")===!0)return;let n=pt.length-1;for(;n>=0;){const o=pt[n].$;if(o.type.name==="QTooltip"){n--;continue}if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;n--}for(let o=ye.length-1;o>=0;o--){const u=ye[o];if((u.anchorEl.value===null||u.anchorEl.value.contains(l)===!1)&&(l===document.body||u.innerRef.value!==null&&u.innerRef.value.contains(l)===!1))e.qClickOutside=!0,u.onClickOutside(e);else return}}function Cn(e){ye.push(e),ye.length===1&&(document.addEventListener("mousedown",$e,We),document.addEventListener("touchstart",$e,We))}function kt(e){const l=ye.findIndex(n=>n===e);l!==-1&&(ye.splice(l,1),ye.length===0&&(document.removeEventListener("mousedown",$e,We),document.removeEventListener("touchstart",$e,We)))}let Tt,Vt;function At(e){const l=e.split(" ");return!(l.length!==2||["top","center","bottom"].includes(l[0])!==!0||["left","middle","right","start","end"].includes(l[1])!==!0)}function pn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const lt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{lt[`${e}#ltr`]=e,lt[`${e}#rtl`]=e});function Ot(e,l){const n=e.split(" ");return{vertical:n[0],horizontal:lt[`${n[1]}#${l===!0?"rtl":"ltr"}`]}}function xn(e,l){let{top:n,left:o,right:u,bottom:i,width:d,height:g}=e.getBoundingClientRect();return l!==void 0&&(n-=l[1],o-=l[0],i+=l[1],u+=l[0],d+=l[0],g+=l[1]),{top:n,bottom:i,height:g,left:o,right:u,width:d,middle:o+(u-o)/2,center:n+(i-n)/2}}function En(e,l,n){let{top:o,left:u}=e.getBoundingClientRect();return o+=l.top,u+=l.left,n!==void 0&&(o+=n[1],u+=n[0]),{top:o,bottom:o+1,height:1,left:u,right:u+1,width:1,middle:u,center:o}}function kn(e,l){return{top:0,center:l/2,bottom:l,left:0,middle:e/2,right:e}}function Mt(e,l,n,o){return{top:e[n.vertical]-l[o.vertical],left:e[n.horizontal]-l[o.horizontal]}}function Ut(e,l=0){if(e.targetEl===null||e.anchorEl===null||l>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Ut(e,l+1)},10);return}const{targetEl:n,offset:o,anchorEl:u,anchorOrigin:i,selfOrigin:d,absoluteOffset:g,fit:h,cover:w,maxHeight:r,maxWidth:S}=e;if(Il.is.ios===!0&&window.visualViewport!==void 0){const A=document.body.style,{offsetLeft:B,offsetTop:L}=window.visualViewport;B!==Tt&&(A.setProperty("--q-pe-left",B+"px"),Tt=B),L!==Vt&&(A.setProperty("--q-pe-top",L+"px"),Vt=L)}const{scrollLeft:p,scrollTop:s}=n,b=g===void 0?xn(u,w===!0?[0,0]:o):En(u,g,o);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:S,maxHeight:r,visibility:"visible"});const{offsetWidth:$,offsetHeight:y}=n,{elWidth:F,elHeight:H}=h===!0||w===!0?{elWidth:Math.max(b.width,$),elHeight:w===!0?Math.max(b.height,y):y}:{elWidth:$,elHeight:y};let C={maxWidth:S,maxHeight:r};(h===!0||w===!0)&&(C.minWidth=b.width+"px",w===!0&&(C.minHeight=b.height+"px")),Object.assign(n.style,C);const T=kn(F,H);let k=Mt(b,T,i,d);if(g===void 0||o===void 0)Je(k,b,T,i,d);else{const{top:A,left:B}=k;Je(k,b,T,i,d);let L=!1;if(k.top!==A){L=!0;const D=2*o[1];b.center=b.top-=D,b.bottom-=D+2}if(k.left!==B){L=!0;const D=2*o[0];b.middle=b.left-=D,b.right-=D+2}L===!0&&(k=Mt(b,T,i,d),Je(k,b,T,i,d))}C={top:k.top+"px",left:k.left+"px"},k.maxHeight!==void 0&&(C.maxHeight=k.maxHeight+"px",b.height>k.maxHeight&&(C.minHeight=C.maxHeight)),k.maxWidth!==void 0&&(C.maxWidth=k.maxWidth+"px",b.width>k.maxWidth&&(C.minWidth=C.maxWidth)),Object.assign(n.style,C),n.scrollTop!==s&&(n.scrollTop=s),n.scrollLeft!==p&&(n.scrollLeft=p)}function Je(e,l,n,o,u){const i=n.bottom,d=n.right,g=ql(),h=window.innerHeight-g,w=document.body.clientWidth;if(e.top<0||e.top+i>h)if(u.vertical==="center")e.top=l[o.vertical]>h/2?Math.max(0,h-i):0,e.maxHeight=Math.min(i,h);else if(l[o.vertical]>h/2){const r=Math.min(h,o.vertical==="center"?l.center:o.vertical===u.vertical?l.bottom:l.top);e.maxHeight=Math.min(i,r),e.top=Math.max(0,r-i)}else e.top=Math.max(0,o.vertical==="center"?l.center:o.vertical===u.vertical?l.top:l.bottom),e.maxHeight=Math.min(i,h-e.top);if(e.left<0||e.left+d>w)if(e.maxWidth=Math.min(d,w),u.horizontal==="middle")e.left=l[o.horizontal]>w/2?Math.max(0,w-d):0;else if(l[o.horizontal]>w/2){const r=Math.min(w,o.horizontal==="middle"?l.middle:o.horizontal===u.horizontal?l.right:l.left);e.maxWidth=Math.min(d,r),e.left=Math.max(0,r-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?l.middle:o.horizontal===u.horizontal?l.left:l.right),e.maxWidth=Math.min(d,w-e.left)}var Tn=je({name:"QMenu",inheritAttrs:!1,props:{...yn,...Ll,...$t,...Rl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:At},self:{type:String,validator:At},offset:{type:Array,validator:pn},scrollTarget:_l,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...zl,"click","escapeKey"],setup(e,{slots:l,emit:n,attrs:o}){let u=null,i,d,g;const h=_e(),{proxy:w}=h,{$q:r}=w,S=q(null),p=q(!1),s=x(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),b=Kt(e,r),{registerTick:$,removeTick:y}=Bl(),{registerTimeout:F}=Hl(),{transitionProps:H,transitionStyle:C}=Fl(e),{localScrollTarget:T,changeScrollEvent:k,unconfigureScrollTarget:A}=wn(e,V),{anchorEl:B,canShow:L}=bn({showing:p}),{hide:D}=Pl({showing:p,canShow:L,handleShow:fe,handleHide:a,hideOnRouteChange:s,processOnMount:!0}),{showPortal:Q,hidePortal:Z,renderPortal:U}=Dl(h,S,N,"menu"),ae={anchorEl:B,innerRef:S,onClickOutside(c){if(e.persistent!==!0&&p.value===!0)return D(c),(c.type==="touchstart"||c.target.classList.contains("q-dialog__backdrop"))&&ce(c),!0}},de=x(()=>Ot(e.anchor||(e.cover===!0?"center middle":"bottom start"),r.lang.rtl)),ie=x(()=>e.cover===!0?de.value:Ot(e.self||"top start",r.lang.rtl)),X=x(()=>(e.square===!0?" q-menu--square":"")+(b.value===!0?" q-menu--dark q-dark":"")),Ae=x(()=>e.autoClose===!0?{onClick:R}:{}),re=x(()=>p.value===!0&&e.persistent!==!0);Y(re,c=>{c===!0?(Xl(M),Cn(ae)):(xt(M),kt(ae))});function ee(){Gl(()=>{let c=S.value;c&&c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))})}function fe(c){if(u=e.noRefocus===!1?document.activeElement:null,Nl(P),Q(),V(),i=void 0,c!==void 0&&(e.touchPosition||e.contextMenu)){const K=Wl(c);if(K.left!==void 0){const{top:te,left:be}=B.value.getBoundingClientRect();i={left:K.left-be,top:K.top-te}}}d===void 0&&(d=Y(()=>r.screen.width+"|"+r.screen.height+"|"+e.self+"|"+e.anchor+"|"+r.lang.rtl,E)),e.noFocus!==!0&&document.activeElement.blur(),$(()=>{E(),e.noFocus!==!0&&ee()}),F(()=>{r.platform.is.ios===!0&&(g=e.autoClose,S.value.click()),E(),Q(!0),n("show",c)},e.transitionDuration)}function a(c){y(),Z(),f(!0),u!==null&&(c===void 0||c.qClickOutside!==!0)&&(((c&&c.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),F(()=>{Z(!0),n("hide",c)},e.transitionDuration)}function f(c){i=void 0,d!==void 0&&(d(),d=void 0),(c===!0||p.value===!0)&&($l(P),A(),kt(ae),xt(M)),c!==!0&&(u=null)}function V(){(B.value!==null||e.scrollTarget!==void 0)&&(T.value=Kl(B.value,e.scrollTarget),k(T.value,E))}function R(c){g!==!0?(jl(w,c),n("click",c)):g=!1}function P(c){re.value===!0&&e.noFocus!==!0&&Yl(S.value,c.target)!==!0&&ee()}function M(c){n("escapeKey"),D(c)}function E(){Ut({targetEl:S.value,offset:e.offset,anchorEl:B.value,anchorOrigin:de.value,selfOrigin:ie.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function N(){return I(Ql,H.value,()=>p.value===!0?I("div",{role:"menu",...o,ref:S,tabindex:-1,class:["q-menu q-position-engine scroll"+X.value,o.class],style:[o.style,C.value],...Ae.value},Ul(l.default)):null)}return ze(f),Object.assign(w,{focus:ee,updatePosition:E}),U}});let Ke=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Ke=e.scrollLeft>=0,e.remove()}const J=1e3,Vn=["start","center","end","start-force","center-force","end-force"],Qt=Array.prototype.filter,An=window.getComputedStyle(document.body).overflowAnchor===void 0?Jl:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Qt.call(n,u=>u.dataset&&u.dataset.qVsAnchor!==void 0).forEach(u=>{delete u.dataset.qVsAnchor});const o=n[l];o&&o.dataset&&(o.dataset.qVsAnchor="")}))};function Ve(e,l){return e+l}function Ze(e,l,n,o,u,i,d,g){const h=e===window?document.scrollingElement||document.documentElement:e,w=u===!0?"offsetWidth":"offsetHeight",r={scrollStart:0,scrollViewSize:-d-g,scrollMaxSize:0,offsetStart:-d,offsetEnd:-g};if(u===!0?(e===window?(r.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r.scrollViewSize+=document.documentElement.clientWidth):(r.scrollStart=h.scrollLeft,r.scrollViewSize+=h.clientWidth),r.scrollMaxSize=h.scrollWidth,i===!0&&(r.scrollStart=(Ke===!0?r.scrollMaxSize-r.scrollViewSize:0)-r.scrollStart)):(e===window?(r.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,r.scrollViewSize+=document.documentElement.clientHeight):(r.scrollStart=h.scrollTop,r.scrollViewSize+=h.clientHeight),r.scrollMaxSize=h.scrollHeight),n!==null)for(let S=n.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetStart+=S[w]);if(o!==null)for(let S=o.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetEnd+=S[w]);if(l!==e){const S=h.getBoundingClientRect(),p=l.getBoundingClientRect();u===!0?(r.offsetStart+=p.left-S.left,r.offsetEnd-=p.width):(r.offsetStart+=p.top-S.top,r.offsetEnd-=p.height),e!==window&&(r.offsetStart+=r.scrollStart),r.offsetEnd+=r.scrollMaxSize-r.offsetStart}return r}function It(e,l,n,o){l==="end"&&(l=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(o===!0&&(l=(Ke===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):n===!0?(o===!0&&(l=(Ke===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function Le(e,l,n,o){if(n>=o)return 0;const u=l.length,i=Math.floor(n/J),d=Math.floor((o-1)/J)+1;let g=e.slice(i,d).reduce(Ve,0);return n%J!==0&&(g-=l.slice(i*J,n).reduce(Ve,0)),o%J!==0&&o!==u&&(g-=l.slice(o,d*J).reduce(Ve,0)),g}const Gt={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Bn=Object.keys(Gt),qt={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Gt};function On({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:n,virtualScrollItemSizeComputed:o}){const u=_e(),{props:i,emit:d,proxy:g}=u,{$q:h}=g;let w,r,S,p=[],s;const b=q(0),$=q(0),y=q({}),F=q(null),H=q(null),C=q(null),T=q({from:0,to:0}),k=x(()=>i.tableColspan!==void 0?i.tableColspan:100);o===void 0&&(o=x(()=>i.virtualScrollItemSize));const A=x(()=>o.value+";"+i.virtualScrollHorizontal),B=x(()=>A.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);Y(B,()=>{X()}),Y(A,L);function L(){ie(r,!0)}function D(a){ie(a===void 0?r:a)}function Q(a,f){const V=l();if(V==null||V.nodeType===8)return;const R=Ze(V,n(),F.value,H.value,i.virtualScrollHorizontal,h.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);S!==R.scrollViewSize&&X(R.scrollViewSize),U(V,R,Math.min(e.value-1,Math.max(0,parseInt(a,10)||0)),0,Vn.indexOf(f)!==-1?f:r!==-1&&a>r?"end":"start")}function Z(){const a=l();if(a==null||a.nodeType===8)return;const f=Ze(a,n(),F.value,H.value,i.virtualScrollHorizontal,h.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),V=e.value-1,R=f.scrollMaxSize-f.offsetStart-f.offsetEnd-$.value;if(w===f.scrollStart)return;if(f.scrollMaxSize<=0){U(a,f,0,0);return}S!==f.scrollViewSize&&X(f.scrollViewSize),ae(T.value.from);const P=Math.floor(f.scrollMaxSize-Math.max(f.scrollViewSize,f.offsetEnd)-Math.min(s[V],f.scrollViewSize/2));if(P>0&&Math.ceil(f.scrollStart)>=P){U(a,f,V,f.scrollMaxSize-f.offsetEnd-p.reduce(Ve,0));return}let M=0,E=f.scrollStart-f.offsetStart,N=E;if(E<=R&&E+f.scrollViewSize>=b.value)E-=b.value,M=T.value.from,N=E;else for(let c=0;E>=p[c]&&M<V;c++)E-=p[c],M+=J;for(;E>0&&M<V;)E-=s[M],E>-f.scrollViewSize?(M++,N=E):N=s[M]+E;U(a,f,M,N)}function U(a,f,V,R,P){const M=typeof P=="string"&&P.indexOf("-force")!==-1,E=M===!0?P.replace("-force",""):P,N=E!==void 0?E:"start";let c=Math.max(0,V-y.value[N]),K=c+y.value.total;K>e.value&&(K=e.value,c=Math.max(0,K-y.value.total)),w=f.scrollStart;const te=c!==T.value.from||K!==T.value.to;if(te===!1&&E===void 0){re(V);return}const{activeElement:be}=document,le=C.value;te===!0&&le!==null&&le!==be&&le.contains(be)===!0&&(le.addEventListener("focusout",de),setTimeout(()=>{le!==null&&le.removeEventListener("focusout",de)})),An(le,V-c);const Be=E!==void 0?s.slice(c,V).reduce(Ve,0):0;if(te===!0){const ve=K>=T.value.from&&c<=T.value.to?T.value.to:K;T.value={from:c,to:ve},b.value=Le(p,s,0,c),$.value=Le(p,s,K,e.value),requestAnimationFrame(()=>{T.value.to!==K&&w===f.scrollStart&&(T.value={from:T.value.from,to:K},$.value=Le(p,s,K,e.value))})}requestAnimationFrame(()=>{if(w!==f.scrollStart)return;te===!0&&ae(c);const ve=s.slice(c,V).reduce(Ve,0),me=ve+f.offsetStart+b.value,He=me+s[V];let Oe=me+R;if(E!==void 0){const Ue=ve-Be,Me=f.scrollStart+Ue;Oe=M!==!0&&Me<me&&He<Me+f.scrollViewSize?Me:E==="end"?He-f.scrollViewSize:me-(E==="start"?0:Math.round((f.scrollViewSize-s[V])/2))}w=Oe,It(a,Oe,i.virtualScrollHorizontal,h.lang.rtl),re(V)})}function ae(a){const f=C.value;if(f){const V=Qt.call(f.children,c=>c.classList&&c.classList.contains("q-virtual-scroll--skip")===!1),R=V.length,P=i.virtualScrollHorizontal===!0?c=>c.getBoundingClientRect().width:c=>c.offsetHeight;let M=a,E,N;for(let c=0;c<R;){for(E=P(V[c]),c++;c<R&&V[c].classList.contains("q-virtual-scroll--with-prev")===!0;)E+=P(V[c]),c++;N=E-s[M],N!==0&&(s[M]+=N,p[Math.floor(M/J)]+=N),M++}}}function de(){C.value!==null&&C.value!==void 0&&C.value.focus()}function ie(a,f){const V=1*o.value;(f===!0||Array.isArray(s)===!1)&&(s=[]);const R=s.length;s.length=e.value;for(let M=e.value-1;M>=R;M--)s[M]=V;const P=Math.floor((e.value-1)/J);p=[];for(let M=0;M<=P;M++){let E=0;const N=Math.min((M+1)*J,e.value);for(let c=M*J;c<N;c++)E+=s[c];p.push(E)}r=-1,w=void 0,b.value=Le(p,s,0,T.value.from),$.value=Le(p,s,T.value.to,e.value),a>=0?(ae(T.value.from),ue(()=>{Q(a)})):ee()}function X(a){if(a===void 0&&typeof window!="undefined"){const E=l();E!=null&&E.nodeType!==8&&(a=Ze(E,n(),F.value,H.value,i.virtualScrollHorizontal,h.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}S=a;const f=parseFloat(i.virtualScrollSliceRatioBefore)||0,V=parseFloat(i.virtualScrollSliceRatioAfter)||0,R=1+f+V,P=a===void 0||a<=0?1:Math.ceil(a/o.value),M=Math.max(1,P,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/R));y.value={total:Math.ceil(M*R),start:Math.ceil(M*f),center:Math.ceil(M*(.5+f)),end:Math.ceil(M*(1+f)),view:P}}function Ae(a,f){const V=i.virtualScrollHorizontal===!0?"width":"height",R={["--q-virtual-scroll-item-"+V]:o.value+"px"};return[a==="tbody"?I(a,{class:"q-virtual-scroll__padding",key:"before",ref:F},[I("tr",[I("td",{style:{[V]:`${b.value}px`,...R},colspan:k.value})])]):I(a,{class:"q-virtual-scroll__padding",key:"before",ref:F,style:{[V]:`${b.value}px`,...R}}),I(a,{class:"q-virtual-scroll__content",key:"content",ref:C,tabindex:-1},f.flat()),a==="tbody"?I(a,{class:"q-virtual-scroll__padding",key:"after",ref:H},[I("tr",[I("td",{style:{[V]:`${$.value}px`,...R},colspan:k.value})])]):I(a,{class:"q-virtual-scroll__padding",key:"after",ref:H,style:{[V]:`${$.value}px`,...R}})]}function re(a){r!==a&&(i.onVirtualScroll!==void 0&&d("virtualScroll",{index:a,from:T.value.from,to:T.value.to-1,direction:a<r?"decrease":"increase",ref:g}),r=a)}X();const ee=Zl(Z,h.platform.is.ios===!0?120:35);en(()=>{X()});let fe=!1;return tn(()=>{fe=!0}),ln(()=>{if(fe!==!0)return;const a=l();w!==void 0&&a!==void 0&&a!==null&&a.nodeType!==8?It(a,w,i.virtualScrollHorizontal,h.lang.rtl):Q(r)}),ze(()=>{ee.cancel()}),Object.assign(g,{scrollTo:Q,reset:L,refresh:D}),{virtualScrollSliceRange:T,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:X,onVirtualScrollEvt:ee,localResetVirtualScroll:ie,padVirtualScroll:Ae,scrollTo:Q,reset:L,refresh:D}}function Hn(e,l,n){return n<=l?l:Math.min(n,Math.max(l,e))}function Lt(e,l,n){if(n<=l)return l;const o=n-l+1;let u=l+(e-l)%o;return u<l&&(u=o+u),u===0?0:u}function Fn(e,l=2,n="0"){if(e==null)return e;const o=""+e;return o.length>=l?o:new Array(l-o.length+1).join(n)+o}const Rt=e=>["add","add-unique","toggle"].includes(e),Mn=".*+?^${}()|[]\\",In=Object.keys(nt);function et(e,l){if(typeof e=="function")return e;const n=e!==void 0?e:l;return o=>o!==null&&typeof o=="object"&&n in o?o[n]:o}var Pn=je({name:"QSelect",inheritAttrs:!1,props:{...qt,...nn,...nt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Rt},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:qt.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Dt,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:l,emit:n}){const{proxy:o}=_e(),{$q:u}=o,i=q(!1),d=q(!1),g=q(-1),h=q(""),w=q(!1),r=q(!1);let S=null,p=null,s,b,$,y=null,F,H,C,T;const k=q(null),A=q(null),B=q(null),L=q(null),D=q(null),Q=on(e),Z=rn(vt),U=x(()=>Array.isArray(e.options)?e.options.length:0),ae=x(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:de,virtualScrollSliceSizeComputed:ie,localResetVirtualScroll:X,padVirtualScroll:Ae,onVirtualScrollEvt:re,scrollTo:ee,setVirtualScrollSize:fe}=On({virtualScrollLength:U,getVirtualScrollTarget:Zt,getVirtualScrollEl:dt,virtualScrollItemSizeComputed:ae}),a=Wt(),f=x(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,v=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const m=e.mapOptions===!0&&s!==void 0?s:[],O=v.map(z=>Jt(z,m));return e.modelValue===null&&t===!0?O.filter(z=>z!==null):O}return v}),V=x(()=>{const t={};return In.forEach(v=>{const m=e[v];m!==void 0&&(t[v]=m)}),t}),R=x(()=>e.optionsDark===null?a.isDark.value:e.optionsDark),P=x(()=>Et(f.value)),M=x(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||f.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),E=x(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),N=x(()=>U.value===0),c=x(()=>f.value.map(t=>G.value(t)).join(", ")),K=x(()=>e.displayValue!==void 0?e.displayValue:c.value),te=x(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),be=x(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||f.value.some(te.value))),le=x(()=>a.focused.value===!0?e.tabindex:-1),Be=x(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${a.targetUid.value}_lb`};return g.value>=0&&(t["aria-activedescendant"]=`${a.targetUid.value}_${g.value}`),t}),ve=x(()=>({id:`${a.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),me=x(()=>f.value.map((t,v)=>({index:v,opt:t,html:te.value(t),selected:!0,removeAtIndex:Yt,toggleOption:ge,tabindex:le.value}))),He=x(()=>{if(U.value===0)return[];const{from:t,to:v}=de.value;return e.options.slice(t,v).map((m,O)=>{const z=we.value(m)===!0,_=Ge(m)===!0,j=t+O,W={clickable:!0,active:_,activeClass:Me.value,manualFocus:!0,focused:!1,disable:z,tabindex:-1,dense:e.optionsDense,dark:R.value,role:"option","aria-selected":_===!0?"true":"false",id:`${a.targetUid.value}_${j}`,onClick:()=>{ge(m)}};return z!==!0&&(g.value===j&&(W.focused=!0),u.platform.is.desktop===!0&&(W.onMousemove=()=>{i.value===!0&&Ce(j)})),{index:j,opt:m,html:te.value(m),label:G.value(m),selected:W.active,focused:W.focused,toggleOption:ge,setOptionIndex:Ce,itemProps:W}})}),Oe=x(()=>e.dropdownIcon!==void 0?e.dropdownIcon:u.iconSet.arrow.dropdown),Ue=x(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Me=x(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ne=x(()=>et(e.optionValue,"value")),G=x(()=>et(e.optionLabel,"label")),we=x(()=>et(e.optionDisable,"disable")),Fe=x(()=>f.value.map(ne.value)),Xt=x(()=>{const t={onInput:vt,onChange:Z,onKeydown:ct,onKeyup:rt,onKeypress:st,onFocus:ut,onClick(v){b===!0&&Te(v)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Z,t});Y(f,t=>{s=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&a.innerLoading.value!==!0&&(d.value!==!0&&i.value!==!0||P.value!==!0)&&($!==!0&&ke(),(d.value===!0||i.value===!0)&&pe(""))},{immediate:!0}),Y(()=>e.fillInput,ke),Y(i,Xe),Y(U,dl);function ot(t){return e.emitValue===!0?ne.value(t):t}function Qe(t){if(t!==-1&&t<f.value.length)if(e.multiple===!0){const v=e.modelValue.slice();n("remove",{index:t,value:v.splice(t,1)[0]}),n("update:modelValue",v)}else n("update:modelValue",null)}function Yt(t){Qe(t),a.focus()}function at(t,v){const m=ot(t);if(e.multiple!==!0){e.fillInput===!0&&Ie(G.value(t),!0,!0),n("update:modelValue",m);return}if(f.value.length===0){n("add",{index:0,value:m}),n("update:modelValue",e.multiple===!0?[m]:m);return}if(v===!0&&Ge(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const O=e.modelValue.slice();n("add",{index:O.length,value:m}),O.push(m),n("update:modelValue",O)}function ge(t,v){if(a.editable.value!==!0||t===void 0||we.value(t)===!0)return;const m=ne.value(t);if(e.multiple!==!0){v!==!0&&(Ie(e.fillInput===!0?G.value(t):"",!0,!0),he()),A.value!==null&&A.value.focus(),(f.value.length===0||qe(ne.value(f.value[0]),m)!==!0)&&n("update:modelValue",e.emitValue===!0?m:t);return}if((b!==!0||w.value===!0)&&a.focus(),ut(),f.value.length===0){const _=e.emitValue===!0?m:t;n("add",{index:0,value:_}),n("update:modelValue",e.multiple===!0?[_]:_);return}const O=e.modelValue.slice(),z=Fe.value.findIndex(_=>qe(_,m));if(z!==-1)n("remove",{index:z,value:O.splice(z,1)[0]});else{if(e.maxValues!==void 0&&O.length>=e.maxValues)return;const _=e.emitValue===!0?m:t;n("add",{index:O.length,value:_}),O.push(_)}n("update:modelValue",O)}function Ce(t){if(u.platform.is.desktop!==!0)return;const v=t!==-1&&t<U.value?t:-1;g.value!==v&&(g.value=v)}function Pe(t=1,v){if(i.value===!0){let m=g.value;do m=Lt(m+t,-1,U.value-1);while(m!==-1&&m!==g.value&&we.value(e.options[m])===!0);g.value!==m&&(Ce(m),ee(m),v!==!0&&e.useInput===!0&&e.fillInput===!0&&De(m>=0?G.value(e.options[m]):F,!0))}}function Jt(t,v){const m=O=>qe(ne.value(O),t);return e.options.find(m)||v.find(m)||t}function Ge(t){const v=ne.value(t);return Fe.value.find(m=>qe(m,v))!==void 0}function ut(t){e.useInput===!0&&A.value!==null&&(t===void 0||A.value===t.target&&t.target.value===c.value)&&A.value.select()}function it(t){jt(t,27)===!0&&i.value===!0&&(Te(t),he(),ke()),n("keyup",t)}function rt(t){const{value:v}=t.target;if(t.keyCode!==void 0){it(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),p!==null&&(clearTimeout(p),p=null),ke(),typeof v=="string"&&v.length!==0){const m=v.toLocaleLowerCase(),O=_=>{const j=e.options.find(W=>String(_.value(W)).toLocaleLowerCase()===m);return j===void 0?!1:(f.value.indexOf(j)===-1?ge(j):he(),!0)},z=_=>{O(ne)!==!0&&_!==!0&&O(G)!==!0&&pe(v,!0,()=>z(!0))};z()}else a.clearValue(t)}function st(t){n("keypress",t)}function ct(t){if(n("keydown",t),sn(t)===!0)return;const v=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),m=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(g.value!==-1||v===!0);if(t.keyCode===27){Re(t);return}if(t.keyCode===9&&m===!1){xe();return}if(t.target===void 0||t.target.id!==a.targetUid.value||a.editable.value!==!0)return;if(t.keyCode===40&&a.innerLoading.value!==!0&&i.value===!1){ce(t),Ee();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Qe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(ce(t),g.value=-1,Pe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ie.value!==void 0&&(ce(t),g.value=Math.max(-1,Math.min(U.value,g.value+(t.keyCode===33?-1:1)*ie.value.view)),Pe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ce(t),Pe(t.keyCode===38?-1:1,e.multiple));const O=U.value;if((C===void 0||T<Date.now())&&(C=""),O>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||C.length!==0)){i.value!==!0&&Ee(t);const z=t.key.toLocaleLowerCase(),_=C.length===1&&C[0]===z;T=Date.now()+1500,_===!1&&(ce(t),C+=z);const j=new RegExp("^"+C.split("").map(Ye=>Mn.indexOf(Ye)!==-1?"\\"+Ye:Ye).join(".*"),"i");let W=g.value;if(_===!0||W<0||j.test(G.value(e.options[W]))!==!0)do W=Lt(W+1,-1,O-1);while(W!==g.value&&(we.value(e.options[W])===!0||j.test(G.value(e.options[W]))!==!0));g.value!==W&&ue(()=>{Ce(W),ee(W),W>=0&&e.useInput===!0&&e.fillInput===!0&&De(G.value(e.options[W]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||C!=="")&&(t.keyCode!==9||m===!1))){if(t.keyCode!==9&&ce(t),g.value!==-1&&g.value<O){ge(e.options[g.value]);return}if(v===!0){const z=(_,j)=>{if(j){if(Rt(j)!==!0)return}else j=e.newValueMode;if(Ie("",e.multiple!==!0,!0),_==null)return;(j==="toggle"?ge:at)(_,j==="add-unique"),e.multiple!==!0&&(A.value!==null&&A.value.focus(),he())};if(e.onNewValue!==void 0?n("newValue",h.value,z):z(h.value),e.multiple!==!0)return}i.value===!0?xe():a.innerLoading.value!==!0&&Ee()}}function dt(){return b===!0?D.value:B.value!==null&&B.value.contentEl!==null?B.value.contentEl:void 0}function Zt(){return dt()}function el(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?me.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?me.value.map((t,v)=>I(gn,{key:"option-"+v,removable:a.editable.value===!0&&we.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:le.value,onRemove(){t.removeAtIndex(v)}},()=>I("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:G.value(t.opt)}))):[I("span",{[be.value===!0?"innerHTML":"textContent"]:K.value})]}function ft(){if(N.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:h.value}):void 0;const t=l.option!==void 0?l.option:m=>I(Sl,{key:m.index,...m.itemProps},()=>I(gl,()=>I(hl,()=>I("span",{[m.html===!0?"innerHTML":"textContent"]:m.label}))));let v=Ae("div",He.value.map(t));return l["before-options"]!==void 0&&(v=l["before-options"]().concat(v)),dn(l["after-options"],v)}function tl(t,v){const m=v===!0?{...Be.value,...a.splitAttrs.attributes.value}:void 0,O={ref:v===!0?A:void 0,key:"i_t",class:M.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...m,id:v===!0?a.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Xt.value};return t!==!0&&b===!0&&(Array.isArray(O.class)===!0?O.class=[...O.class,"no-pointer-events"]:O.class+=" no-pointer-events"),I("input",O)}function vt(t){S!==null&&(clearTimeout(S),S=null),p!==null&&(clearTimeout(p),p=null),!(t&&t.target&&t.target.qComposing===!0)&&(De(t.target.value||""),$=!0,F=h.value,a.focused.value!==!0&&(b!==!0||w.value===!0)&&a.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,pe(h.value)},e.inputDebounce)))}function De(t,v){h.value!==t&&(h.value=t,v===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",t):p=setTimeout(()=>{p=null,n("inputValue",t)},e.inputDebounce))}function Ie(t,v,m){$=m!==!0,e.useInput===!0&&(De(t,!0),(v===!0||m!==!0)&&(F=t),v!==!0&&pe(t))}function pe(t,v,m){if(e.onFilter===void 0||v!==!0&&a.focused.value!==!0)return;a.innerLoading.value===!0?n("filterAbort"):(a.innerLoading.value=!0,r.value=!0),t!==""&&e.multiple!==!0&&f.value.length!==0&&$!==!0&&t===G.value(f.value[0])&&(t="");const O=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);y!==null&&clearTimeout(y),y=O,n("filter",t,(z,_)=>{(v===!0||a.focused.value===!0)&&y===O&&(clearTimeout(y),typeof z=="function"&&z(),r.value=!1,ue(()=>{a.innerLoading.value=!1,a.editable.value===!0&&(v===!0?i.value===!0&&he():i.value===!0?Xe(!0):i.value=!0),typeof _=="function"&&ue(()=>{_(o)}),typeof m=="function"&&ue(()=>{m(o)})}))},()=>{a.focused.value===!0&&y===O&&(clearTimeout(y),a.innerLoading.value=!1,r.value=!1),i.value===!0&&(i.value=!1)})}function ll(){return I(Tn,{ref:B,class:E.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&N.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:R.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Ue.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ve.value,onScrollPassive:re,onBeforeShow:gt,onBeforeHide:nl,onShow:ol},ft)}function nl(t){ht(t),xe()}function ol(){fe()}function al(t){Te(t),A.value!==null&&A.value.focus(),w.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function ul(t){Te(t),ue(()=>{w.value=!1})}function il(){const t=[I(vn,{class:`col-auto ${a.fieldClass.value}`,...V.value,for:a.targetUid.value,dark:R.value,square:!0,loading:r.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...a.splitAttrs.listeners.value,onFocus:al,onBlur:ul},{...l,rawControl:()=>a.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&t.push(I("div",{ref:D,class:E.value+" scroll",style:e.popupContentStyle,...ve.value,onClick:Re,onScrollPassive:re},ft())),I(cn,{ref:L,modelValue:d.value,position:e.useInput===!0?"top":void 0,transitionShow:H,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:gt,onBeforeHide:rl,onHide:sl,onShow:cl},()=>I("div",{class:"q-select__dialog"+(R.value===!0?" q-select__dialog--dark q-dark":"")+(w.value===!0?" q-select__dialog--focused":"")},t))}function rl(t){ht(t),L.value!==null&&L.value.__updateRefocusTarget(a.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),a.focused.value=!1}function sl(t){he(),a.focused.value===!1&&n("blur",t),ke()}function cl(){const t=document.activeElement;(t===null||t.id!==a.targetUid.value)&&A.value!==null&&A.value!==t&&A.value.focus(),fe()}function xe(){d.value!==!0&&(g.value=-1,i.value===!0&&(i.value=!1),a.focused.value===!1&&(y!==null&&(clearTimeout(y),y=null),a.innerLoading.value===!0&&(n("filterAbort"),a.innerLoading.value=!1,r.value=!1)))}function Ee(t){a.editable.value===!0&&(b===!0?(a.onControlFocusin(t),d.value=!0,ue(()=>{a.focus()})):a.focus(),e.onFilter!==void 0?pe(h.value):(N.value!==!0||l["no-option"]!==void 0)&&(i.value=!0))}function he(){d.value=!1,xe()}function ke(){e.useInput===!0&&Ie(e.multiple!==!0&&e.fillInput===!0&&f.value.length!==0&&G.value(f.value[0])||"",!0,!0)}function Xe(t){let v=-1;if(t===!0){if(f.value.length!==0){const m=ne.value(f.value[0]);v=e.options.findIndex(O=>qe(ne.value(O),m))}X(v)}Ce(v)}function dl(t,v){i.value===!0&&a.innerLoading.value===!1&&(X(-1,!0),ue(()=>{i.value===!0&&a.innerLoading.value===!1&&(t>v?X():Xe(!0))}))}function mt(){d.value===!1&&B.value!==null&&B.value.updatePosition()}function gt(t){t!==void 0&&Te(t),n("popupShow",t),a.hasPopupOpen=!0,a.onControlFocusin(t)}function ht(t){t!==void 0&&Te(t),n("popupHide",t),a.hasPopupOpen=!1,a.onControlFocusout(t)}function St(){b=u.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||N.value===!1:!0),H=u.platform.is.ios===!0&&b===!0&&e.useInput===!0?"fade":e.transitionShow}return an(St),un(mt),St(),ze(()=>{S!==null&&clearTimeout(S),p!==null&&clearTimeout(p)}),Object.assign(o,{showPopup:Ee,hidePopup:he,removeAtIndex:Qe,add:at,toggleOption:ge,getOptionIndex:()=>g.value,setOptionIndex:Ce,moveOptionSelection:Pe,filter:pe,updateMenuPosition:mt,updateInputValue:Ie,isOptionSelected:Ge,getEmittingOptionValue:ot,isOptionDisabled:(...t)=>we.value.apply(null,t)===!0,getOptionValue:(...t)=>ne.value.apply(null,t),getOptionLabel:(...t)=>G.value.apply(null,t)}),Object.assign(a,{innerValue:f,fieldClass:x(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:k,targetRef:A,hasValue:P,showPopup:Ee,floatingLabel:x(()=>e.hideSelected!==!0&&P.value===!0||typeof h.value=="number"||h.value.length!==0||Et(e.displayValue)),getControlChild:()=>{if(a.editable.value!==!1&&(d.value===!0||N.value!==!0||l["no-option"]!==void 0))return b===!0?il():ll();a.hasPopupOpen===!0&&(a.hasPopupOpen=!1)},controlEvents:{onFocusin(t){a.onControlFocusin(t)},onFocusout(t){a.onControlFocusout(t,()=>{ke(),xe()})},onClick(t){if(Re(t),b!==!0&&i.value===!0){xe(),A.value!==null&&A.value.focus();return}Ee(t)}},getControl:t=>{const v=el(),m=t===!0||d.value!==!0||b!==!0;if(e.useInput===!0)v.push(tl(t,m));else if(a.editable.value===!0){const z=m===!0?Be.value:void 0;v.push(I("input",{ref:m===!0?A:void 0,key:"d_t",class:"q-select__focus-target",id:m===!0?a.targetUid.value:void 0,value:K.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...z,onKeydown:ct,onKeyup:it,onKeypress:st})),m===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&v.push(I("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:rt}))}if(Q.value!==void 0&&e.disable!==!0&&Fe.value.length!==0){const z=Fe.value.map(_=>I("option",{value:_,selected:!0}));v.push(I("select",{class:"hidden",name:Q.value,multiple:e.multiple},z))}const O=e.useInput===!0||m!==!0?void 0:a.splitAttrs.attributes.value;return I("div",{class:"q-field__native row items-center",...O,...a.splitAttrs.listeners.value},v)},getInnerAppend:()=>e.loading!==!0&&r.value!==!0&&e.hideDropdownIcon!==!0?[I(Ne,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:Oe.value})]:null}),Nt(a)}});export{Pn as Q,Tn as a,Hn as b,hn as c,qt as d,On as e,Bn as f,gn as g,Sn as h,pn as i,wn as j,bn as k,kt as l,Cn as m,Fn as n,_n as o,Ot as p,zn as q,Ke as r,Ut as s,Se as t,Rn as u,At as v};
