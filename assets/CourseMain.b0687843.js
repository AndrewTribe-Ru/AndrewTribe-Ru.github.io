import{g as W,r as A,h as Z,i as ee,j as M,l as ve,m as F,Q as ge,e as T,f as he,k as ye,s as Ce}from"./common.e5796fb6.js";import{Q as g,a as le}from"./QBtn.dab5c315.js";import{Q as te}from"./use-cache.52127d72.js";import{a as be}from"./QSkeleton.64a7694d.js";import{Q as we}from"./QToggle.2b56b923.js";import{Q as V}from"./QCardSection.2bf1f146.js";import{Q as G}from"./QInput.3b53e200.js";import{Q as oe}from"./QCardActions.f63953ca.js";import{Q as j}from"./QCard.80b35fcd.js";import{Q as ae}from"./QDialog.86dd37ae.js";import{a2 as se,r as v,o as h,c as w,w as a,a as l,e as $,a4 as N,d as q,a9 as L,a5 as J,a7 as ne,a6 as re,ay as y,aj as ue,ak as ie,aH as H,al as z,E as ke}from"./index.17a483d5.js";import{u as D}from"./useAxios.ef0e9d3f.js";import{Q as _e}from"./QScrollArea.7faef3c1.js";import{b as xe,c as Ve,a as qe}from"./contents.740b8370.js";import"./render.c21811ee.js";import"./use-dark.b138e361.js";import"./touch.3df10340.js";import"./format.7877170e.js";import"./QSeparator.d2eabae8.js";import"./QList.dfe8eab7.js";import"./focus-manager.05708ea9.js";import"./QItem.e67408f3.js";import"./position-engine.ae3b237b.js";import"./use-tick.5666653d.js";import"./use-form.e660d19e.js";import"./use-checkbox.a57d7868.js";import"./axios.6e1fcf85.js";import"./QResizeObserver.f7851895.js";import"./QScrollObserver.aad52378.js";import"./TouchPan.dea299a3.js";import"./QtnDetailModal.5cec5dc9.js";const ce=r=>(ue("data-v-aff8c39e"),r=r(),ie(),r),Me=ce(()=>q("div",{class:"text-h6"},"\uCEE8\uD150\uCE20 \uBAA9\uB85D",-1)),$e=ce(()=>q("div",null,"\uC120\uD0DD\uB41C \uCEE8\uD150\uCE20",-1)),Ne={class:"text-h6"},Se={__name:"ContentsListModal",props:{fromMain:{type:Boolean,default:!1}},emits:["select-contents"],setup(r,{expose:I,emit:U}){const _=v(),s=r,S=v({max:0,rows:20,currentPage:1,totalRowsCnt:0}),i=v(!1),b=v({}),p=U,u=v([]),Q=v([]),R=v(10),Y=async()=>{console.log("getContentslist"),Q.value=[],y.show(),await D("/api/zion/rus/contents/edu/list",{method:"post",params:{rows:E.value.rows,currentPage:E.value.currentPage}}).then(n=>{if(console.log("res : ",n),n.data.header.code==="I001"){let d=n.data.body.list;if(d.length>0)for(let m=0;m<d.length;m++){let x=d[m];x.checked=!1,Q.value.push(x)}}y.hide()}).catch(()=>{y.hide()})},O=async()=>{console.log(b.value),console.log("getCurList"),await D("/api/zion/rus/contents/current/list",{method:"post",params:{courseSeq:b.value.courseSeq,rows:S.value.rows,currentPage:S.value.currentPage}}).then(n=>{if(console.log("res : ",n),n.data.header.code==="I001"){let d=n.data.body.list;if(d.length>0)for(let m=0;m<d.length;m++){let x=d[m];x.idx=m+1,P.value.push(x)}}})},P=v([]),B=n=>{console.log("item : ",n),n.index,n.to},C=async()=>{if(!o())return alert("\uB4F1\uB85D \uD560 \uCEE8\uD150\uCE20\uB97C \uC120\uD0DD \uD574 \uC8FC\uC138\uC694."),!1;y.show(),await D("/api/zion/rus/contents/insert/grp",{method:"post",params:{courseSeq:b.value.courseSeq,contentsGrpList:u.value}}).then(n=>{if(n.data.header.code==="I001"){let d="",m=n.data.body;c,typeof m=="number"?u.value.length-m===0?d=`${b.value.courseNm} \uAC15\uC758\uC5D0 \uCEE8\uD150\uCE20(${u.value.length}\uAC74) \uC744(\uB97C) \uC815\uC0C1\uC801\uC73C\uB85C \uCD94\uAC00\uD558\uC600\uC2B5\uB2C8\uB2E4.`:d=`${b.value.courseNm} \uAC15\uC758\uC5D0 \uC911\uBCF5\uB41C \uCEE8\uD150\uCE20\uB97C \uC81C\uC678\uD55C (${m}\uAC74) \uC744(\uB97C) \uC815\uC0C1\uC801\uC73C\uB85C \uCD94\uAC00\uD558\uC600\uC2B5\uB2C8\uB2E4.`:d=`${b.value.courseNm} \uAC15\uC758\uC5D0 \uCEE8\uD150\uCE20(${u.value.length}\uAC74) \uC744(\uB97C) \uC815\uC0C1\uC801\uC73C\uB85C \uCD94\uAC00\uD558\uC600\uC2B5\uB2C8\uB2E4.`,alert(d),K(),f()}else alert(n.data.header.message)}).catch(n=>{console.log("err : ",n)}).finally(()=>{y.hide()})},o=()=>u.value.length>0,t=n=>{console.log("item : ",n);for(let d=0;d<u.value.length;d++)if(u.value[d].contentsSeq===n.contentsSeq)return alert("\uC774\uBBF8 \uC120\uD0DD\uD55C \uCEE8\uD150\uCE20 \uC785\uB2C8\uB2E4."),!1;u.value.push(n)},e=n=>{_.value.modalOpen(n)},f=()=>{u.value=[],P.value=[]},k=n=>{u.value.splice(n,1)},pe=()=>{if(u.value.length==0)return alert("\uC120\uD0DD\uD55C \uD56D\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),!1;p("select-contents",u.value),K(),f()},K=()=>{i.value=!i.value},E=v({rows:50,currentPage:1}),fe=n=>{E.value.rows=n,Y()};return I({modalOpen:n=>{f(),n&&s.fromMain&&(console.log("item : ",n),b.value=n.row,O()),console.log("modalopen"),Y(),i.value=!i.value}}),(n,d)=>(h(),w(ae,{"full-width":s.fromMain,modelValue:i.value,"onUpdate:modelValue":d[3]||(d[3]=m=>i.value=m),persistent:""},{default:a(()=>[l(j,{class:"row justify-between"},{default:a(()=>[l(V,null,{default:a(()=>[l(j,null,{default:a(()=>[l(V,{class:"row justify-between"},{default:a(()=>[Me]),_:1}),l(V,null,{default:a(()=>[l(W,{title:"\uCD1D n \uAC74",rows:Q.value,columns:xe,label:A,color:"amber","hide-pagination":"","rows-per-page-options":[0],"row-key":"name"},{"top-right":a(()=>[l(te,{"map-options":"","emit-value":"",modelValue:R.value,"onUpdate:modelValue":[d[0]||(d[0]=m=>R.value=m),d[1]||(d[1]=m=>fe(R.value))],options:Z,label:A,"option-value":"value","option-label":"label"},null,8,["modelValue","options","label"])]),body:a(m=>[l(ee,{class:"no-wrap text-center"},{default:a(()=>[l(M,{key:"idx"},{default:a(()=>[l(g,{rounded:"",color:"primary",label:"\uCD94\uAC00",onClick:x=>t(m.row)},null,8,["onClick"])]),_:2},1024),l(M,{class:"cursor-pointer",key:"courseNm",style:{width:"100px"},onClick:x=>e(m)},{default:a(()=>[$(N(m.row.title),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["rows","columns","label"])]),_:1})]),_:1})]),_:1}),l(V,{style:{width:"480px"}},{default:a(()=>[l(j,{flat:"",bordered:"",class:"q-pt-md"},{default:a(()=>[s.fromMain?(h(),w(V,{key:0},{default:a(()=>[q("div",null,N(`\uC801\uC6A9 \uAC15\uC758 : ${b.value.courseNm}`),1)]),_:1})):L("",!0),l(V,{class:"q-pt-none"},{default:a(()=>[$e,l(_e,{style:{height:"300px"}},{default:a(()=>[(h(!0),J(ne,null,re(u.value,(m,x)=>(h(),w(g,{class:"q-ma-xs",rounded:"",ripple:"",color:"teal",key:x},{default:a(()=>[q("div",null,N(m.title),1),l(le,{right:"",name:"close",onClick:Oe=>k(x)},null,8,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),l(oe,{class:"flex flex-center q-mb-md"},{default:a(()=>[l(g,{label:"\uCDE8\uC18C",color:"secondary",onClick:d[2]||(d[2]=m=>i.value=!i.value)}),s.fromMain?(h(),w(g,{key:0,label:"\uB4F1\uB85D",color:"primary",onClick:C})):(h(),w(g,{key:1,label:"\uC644\uB8CC",color:"primary",onClick:pe}))]),_:1})]),_:1})]),_:1}),s.fromMain?(h(),w(V,{key:0},{default:a(()=>[l(j,null,{default:a(()=>[l(V,{class:"row justify-between"},{default:a(()=>[q("div",Ne,[$(" \uB4F1\uB85D\uB41C \uCEE8\uD150\uCE20 \uBAA9\uB85D : "),q("b",null,N(b.value.courseNm),1)])]),_:1}),l(V,null,{default:a(()=>[l(W,{style:{height:"680px"},flat:"",bordered:"",rows:P.value,columns:Ve,"rows-per-page-options":[0],"hide-pagination":"","row-key":"idx",pagination:S.value,onVirtualScroll:B,"virtual-scroll":""},null,8,["rows","columns","pagination"])]),_:1})]),_:1})]),_:1})):L("",!0)]),_:1}),l(qe,{ref_key:"contentsDetailModal",ref:_},null,512)]),_:1},8,["full-width","modelValue"]))}};var de=se(Se,[["__scopeId","data-v-aff8c39e"]]);const me=r=>(ue("data-v-fec449fc"),r=r(),ie(),r),Qe=me(()=>q("div",{class:"text-h6"},"\uAC1C\uAC15\uB4F1\uB85D",-1)),Pe=me(()=>q("br",null,null,-1)),Re={__name:"CourseRgstModal",props:{isDetail:{type:Boolean,default:!1}},emits:["insert-finish"],setup(r,{expose:I,emit:U}){const _=r,s=v({courseSeq:"",courseMonth:"",courseNm:"",courseCd:""}),S=o=>{console.log("date : ",o);var t=/^\d{1,8}$/;t.test(o)?console.log("regex true"):(console.log("\uC815\uADDC\uC2DD\uD2C0\uB9BC : "),s.value.courseMonth="")},i=v(!0),b=U;let p=v(!1);const u=v([]),Q=v(),R=o=>{console.log("contentsList : ",o),u.value=o},Y=()=>{Q.value.modalOpen()},O=async()=>{let o="",t={};if(_.isDetail)o="/api/zion/rus/course/update",t={courseSeq:s.value.courseSeq,courseNm:s.value.courseNm,courseCd:s.value.courseMonth+s.value.courseCd};else{o="/api/zion/rus/course/insert";let e=[];if(u.value.length>0)for(let f=0;f<u.value.length;f++){let k=u.value[f];e.push({contentsSeq:k.contentsSeq})}t={courseNm:s.value.courseNm,courseCd:s.value.courseMonth+s.value.courseCd,contentsGrpList:e}}console.log("params : ",t),y.show(),await D(o,{method:"post",params:t}).then(e=>{e.data.header.code==="I001"&&(alert(e.data.header.message)||(p.value=!p.value,b("insert-finish"),P())),y.hide()}).catch(e=>{console.error(e),y.hide()})},P=()=>{s.value.courseMonth="",s.value.courseNm="",s.value.courseCd=""},B=o=>{u.value.splice(o,1)};return I({modalOpen:o=>{console.log("update target : ",o),_.isDetail&&(console.log("isDetail true"),i.value=!1,s.value.courseSeq=o.courseSeq,s.value.courseMonth=o.courseCd.slice(0,6),s.value.courseNm=o.courseNm,s.value.courseCd=o.courseCd.slice(6)),p.value=!p.value}}),(o,t)=>(h(),w(ae,{modelValue:z(p),"onUpdate:modelValue":t[6]||(t[6]=e=>H(p)?p.value=e:p=e),persistent:""},{default:a(()=>[l(j,{class:"modal-container"},{default:a(()=>[l(V,{class:"row justify-between"},{default:a(()=>[Qe,l(g,{dense:"",flat:"",round:"",icon:"close",onClick:t[0]||(t[0]=e=>H(p)?p.value=!z(p):p=!z(p)),class:"q-ml-md"})]),_:1}),l(ve,{onSubmit:O,onReset:P},{default:a(()=>[l(G,{filled:"","bg-color":F(i.value),readonly:!i.value,modelValue:s.value.courseNm,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.courseNm=e),label:"\uAC1C\uAC15\uBA85 *",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["bg-color","readonly","modelValue","rules"]),l(G,{filled:"",type:"number","bg-color":F(i.value),readonly:!i.value,modelValue:s.value.courseMonth,"onUpdate:modelValue":[t[2]||(t[2]=e=>s.value.courseMonth=e),S],label:"\uAC1C\uAC15\uC6D4 (ex:202312) *",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["bg-color","readonly","modelValue","rules"]),l(G,{filled:"","bg-color":F(i.value),readonly:!i.value,modelValue:s.value.courseCd,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value.courseCd=e),label:"prefix (ex: HB144-4) *",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["bg-color","readonly","modelValue","rules"]),_.isDetail?L("",!0):(h(),w(V,{key:0,class:"q-gutter-x-md"},{default:a(()=>[l(g,{class:"q-mb-md",filled:"",label:"\uCEE8\uD150\uCE20 \uCD94\uAC00",onClick:Y}),Pe,(h(!0),J(ne,null,re(u.value,(e,f)=>(h(),w(g,{class:"q-ma-xs",rounded:"",ripple:"",color:"teal",key:f},{default:a(()=>[q("div",null,N(e.title),1),l(le,{right:"",name:"close",onClick:k=>B(f)},null,8,["onClick"])]),_:2},1024))),128))]),_:1})),l(oe,null,{default:a(()=>[l(g,{label:"\uCDE8\uC18C",color:"secondary",onClick:t[4]||(t[4]=e=>H(p)?p.value=!z(p):p=!z(p))}),l(g,{label:"\uCD08\uAE30\uD654",color:"secondary",type:"reset"}),_.isDetail?L("",!0):(h(),w(g,{key:0,label:"\uB4F1\uB85D",color:"primary",type:"submit"})),i.value?L("",!0):(h(),w(g,{key:1,label:"\uC218\uC815",color:"primary",onClick:t[5]||(t[5]=e=>i.value=!i.value)})),i.value&&_.isDetail?(h(),w(g,{key:2,label:"\uC81C\uCD9C",color:"primary",type:"submit",onClick:O})):L("",!0)]),_:1})]),_:1})]),_:1}),l(de,{ref_key:"contentsListModal",ref:Q,onSelectContents:R},null,512)]),_:1},8,["modelValue"]))}};var X=se(Re,[["__scopeId","data-v-fec449fc"]]);const Le=[{name:"checked",required:!0,label:"\uC120\uD0DD",align:"center",field:r=>r.checked,format:r=>`${r}`},{name:"contents",required:!0,label:"\uCEE8\uD150\uCE20",align:"center",field:r=>r.contents},{name:"courseCd",required:!0,label:"\uCF54\uB4DC",align:"center",field:r=>r.courseCd},{name:"courseNm",required:!0,label:"\uAC1C\uAC15\uBA85",align:"center",field:r=>r.courseNm},{name:"useYn",required:!0,label:"\uC0AC\uC6A9\uC5EC\uBD80",align:"center",field:r=>r.useYn},{name:"frstRegDate",required:!0,label:"\uB4F1\uB85D\uC77C",align:"center",field:r=>r.frstRegDate},{name:"frstRegId",required:!0,label:"\uB4F1\uB85D\uC790",align:"center",field:r=>r.frstRegId}],De={class:"q-ma-md"},Ie={class:"q-pa-lg flex flex-center"},Ue={class:"q-mt-md"},hl={__name:"CourseMain",setup(r){const I=v(),U=v(),_=v(),s=v(1),S=v(10),i=v([]);ke(()=>{u()});const b=()=>{Ce(),u()},p=o=>{C.value.rows=o;let t=C.value.totalRowsCnt/(C.value.currentPage*o);C.value.currentPage=t===0?1:t,u()},u=async()=>{y.show(),await D("/api/zion/rus/course/list",{method:"post",params:{rows:C.value.rows,currentPage:C.value.currentPage}}).then(o=>{if(console.log("res : ",o),o.data.header.code==="I001"){const t=o.data.body.list,e=o.data.body;if(i.value=[],t.length>0){for(let f=0;f<t.length;f++){let k=t[f];i.value.push({...k,checked:!1})}C.value.max=e.totalPageCnt,C.value.totalRowsCnt=e.totalRowsCnt}}y.hide()}).catch(()=>{y.hide()})},Q=o=>{_.value.modalOpen(o)},R=async o=>{console.log("toggle item : ",o);let t=o.row.useYn==="Y"?`'${o.row.courseNm}' \uC744(\uB97C) \uC885\uAC15\uD558\uC2DC\uAC9F\uC2B5\uB2C8\uAE4C?`:`'${o.row.courseNm}' \uC744(\uB97C) \uAC1C\uAC15\uD558\uC2DC\uAC9F\uC2B5\uB2C8\uAE4C?`;if(confirm(t)){console.log("logic...");let f=o.row.useYn==="Y"?"N":"Y";y.show(),await Y(o,f).then(k=>{console.log("res : ",k),k.data.header.code==="I001"?o.row.useYn=f:alert(k.data.header.message)}).catch(k=>{console.error(k)}).finally(()=>{y.hide()})}},Y=(o,t)=>D("/api/zion/rus/course/update/use",{method:"post",params:{useYn:t,courseSeq:o.row.courseSeq}}),O=()=>{I.value.modalOpen()},P=()=>{let o=i.value.filter((t,e)=>t.checked);if(o.length===0)alert("\uC218\uC815\uD560 \uD56D\uBAA9\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");else if(o.length>1)alert("\uC218\uC815\uD560 \uD56D\uBAA9\uC740 \uD558\uB098\uB9CC \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");else{let t=o[0];U.value.modalOpen(t)}},B=()=>{let o=[],t="";i.value.forEach((e,f)=>{e.checked&&(t+=e.courseNm+`
`,o.push(e))}),y.show(),D("/api/zion/rus/course/delete",{method:"delete",params:o}).then(e=>{e.data.header.code==="I001"?u():alert(e.data.header.message)}).catch(e=>{console.error(e)}).finally(()=>{y.hide()})},C=v({max:0,rows:10,currentPage:1,totalRowsCnt:0});return(o,t)=>(h(),J("div",De,[l(he,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{navigation:a(()=>[l(ge,null,{default:a(()=>[l(g,{onClick:t[0]||(t[0]=e=>o.$refs.stepper.next()),color:"primary",label:s.value===3?"Finish":"Continue"},null,8,["label"]),s.value>1?(h(),w(g,{key:0,flat:"",color:"primary",onClick:t[1]||(t[1]=e=>o.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):L("",!0)]),_:1})]),default:a(()=>[l(T,{name:1,title:"1\uB2E8\uACC4",caption:"\uC870\uD68C",icon:"settings",done:s.value>1},{default:a(()=>[$(" \uAC1C\uAC15\uBC18\uC744 \uAC80\uC0C9\uD558\uC138\uC694. ")]),_:1},8,["done"]),l(T,{name:2,title:"2\uB2E8\uACC4",caption:"\uB4F1\uB85D",icon:"create_new_folder",done:s.value>2},{default:a(()=>[$(" \uB4F1\uB85D\uBC84\uD2BC\uC744 \uD1B5\uD574 \uC0C8\uB85C\uC6B4 \uAC1C\uAC15\uBC18\uC744 \uB4F1\uB85D\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. ")]),_:1},8,["done"]),l(T,{name:3,title:"3\uB2E8\uACC4",caption:"\uC218\uC815/\uC0AD\uC81C",icon:"add_comment"},{default:a(()=>[$(" \uB4F1\uB85D\uB41C \uAC1C\uAC15\uBC18\uC744 \uC218\uC815/\uC0AD\uC81C \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. ")]),_:1})]),_:1},8,["modelValue"]),l(W,{class:"q-mt-md",title:"\uAC1C\uAC15\uBAA9\uB85D",rows:i.value,columns:Le,label:A,color:"amber","hide-pagination":"",pagination:{rowsPerPage:0},"row-key":"name"},{"top-right":a(()=>[l(te,{"map-options":"","emit-value":"",modelValue:S.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>S.value=e),p],options:Z,label:A,"option-value":"value","option-label":"label"},null,8,["modelValue","options","label"])]),body:a(e=>[l(ee,{class:"no-wrap text-center"},{default:a(()=>[l(M,{key:"checked",style:{width:"100px"}},{default:a(()=>[l(be,{modelValue:e.row.checked,"onUpdate:modelValue":f=>e.row.checked=f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(M,{key:"contents"},{default:a(()=>[l(g,{rounded:"","fab-mini":"",color:"primary",label:e.cols[1].label,onClick:f=>Q(e)},null,8,["label","onClick"])]),_:2},1024),l(M,{key:"courseCd",class:"cursor-pointer"},{default:a(()=>[$(N(e.row.courseCd),1)]),_:2},1024),l(M,{key:"courseNm",class:"cursor-pointer"},{default:a(()=>[$(N(e.row.courseNm),1)]),_:2},1024),l(M,{key:"useYn"},{default:a(()=>[l(we,{"true-value":"Y","false-value":"N","model-value":e.row.useYn,"onUpdate:modelValue":f=>R(e)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),l(M,{key:"frstRegDate"},{default:a(()=>[$(N(e.row.frstRegDate),1)]),_:2},1024),l(M,{key:"frstRegDate"},{default:a(()=>[$(N(e.row.frstRegId),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","columns","label"]),q("div",Ie,[l(ye,{modelValue:C.value.currentPage,"onUpdate:modelValue":[t[4]||(t[4]=e=>C.value.currentPage=e),b],max:C.value.max},null,8,["modelValue","max"])]),q("div",Ue,[l(g,{class:"q-mr-md",color:"primary",label:"\uB4F1\uB85D",onClick:t[5]||(t[5]=e=>O())}),l(g,{class:"q-mr-md",color:"white","text-color":"black",label:"\uC218\uC815",onClick:P}),l(g,{class:"q-mr-md",color:"white","text-color":"black",label:"\uC0AD\uC81C",onClick:B})]),l(X,{ref_key:"courseRgstModal",ref:I,onInsertFinish:t[6]||(t[6]=e=>u())},null,512),l(X,{ref_key:"courseUpdateModal",ref:U,"is-detail":!0,onInsertFinish:t[7]||(t[7]=e=>u())},null,512),l(de,{ref_key:"contentsListModal",ref:_,"from-main":!0},null,512)]))}};export{hl as default};
