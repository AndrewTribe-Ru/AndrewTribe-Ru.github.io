import{u as F,r as d,c as J,w as X,o as Z,d as x,e as D,f as o,g as a,h as s,i as t,j as h,Q as k,k as V,l as I,m as c,t as m,n as B,p as L,q as N,V as R}from"./index.63e86091.js";import{u as ee,a as te,Q as le,b as ae,c as U,d as se}from"./QSelect.8f755ac3.js";const ne={class:"q-pa-md flex flex-center column",style:{"max-width":"300px","text-align":"center"}},oe={key:0},re={class:"q-gutter-y-md column",style:{"max-width":"300px"}},ie={key:1},ue={class:"q-gutter-y-md column",style:{"max-width":"300px"}},de={class:"text-body2"},ce={class:"text-h6 q-mt-sm q-mb-xs text-center"},me={class:"text-caption text-center"},ve={class:"text-body2"},pe={class:"text-h6"},ge={key:0,class:"text-caption"},_e={__name:"Login",setup(fe){const y=ee(),{$t:S}=F(),{login:K,isLoading:r,requiresOtp:E,pendingToken:W,otpMessage:$,otpExpiresIn:z,verifyOtpHandler:M,cancelOtpState:Q,remainingAttempts:v,otpError:q}=te(),p=d(""),g=d(""),_=d(""),b=d(""),O=d("N"),i=d(""),n=d(0);let l=null;const j=J(()=>{const u=Math.floor(n.value/60),e=n.value%60;return`${u}:${e.toString().padStart(2,"0")}`}),G=()=>{n.value=z.value,l&&clearInterval(l),l=setInterval(()=>{n.value>0?n.value--:(clearInterval(l),H())},1e3)},H=()=>{y.notify({type:"negative",message:"OTP \uC778\uC99D \uC2DC\uAC04\uC774 \uB9CC\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC8FC\uC138\uC694.",timeout:3e3}),A()};X(E,u=>{u?G():l&&clearInterval(l)}),Z(()=>{l&&clearInterval(l)});const T=()=>p.value.trim()?(_.value="",!0):(_.value=S(R.ID_REQUIRED),!1),C=()=>g.value.trim()?(b.value="",!0):(b.value=S(R.PASSWORD_REQUIRED),!1),w=async()=>{const u=T(),e=C();!u||!e||await K(p.value,g.value,O.value)},Y=()=>{y.dialog({title:"\uC544\uC774\uB514/\uD328\uC2A4\uC6CC\uB4DC \uCC3E\uAE30",message:"\uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758\uD558\uC138\uC694",html:!0,ok:{label:"Yes",color:"primary"}})},P=async()=>{if(i.value.length!==6){y.notify({type:"warning",message:"6\uC790\uB9AC OTP \uCF54\uB4DC\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694"});return}await M({otpCode:i.value,pendingToken:W.value})&&(l&&(clearInterval(l),l=null),Q(),i.value="",n.value=0)},A=()=>{l&&(clearInterval(l),l=null),Q(),i.value="",n.value=0,p.value="",g.value="",O.value="N",y.notify({type:"info",message:"\uC778\uC99D\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4"})};return(u,e)=>(x(),D(le,null,{default:o(()=>[a(se,null,{default:o(()=>[a(ae,{class:"q-pa-xl flex flex-center"},{default:o(()=>[e[9]||(e[9]=s("section",{class:"q-mb-xl"},null,-1)),s("div",ne,[t(E)?(x(),h("div",ie,[e[8]||(e[8]=s("h6",null,"2\uB2E8\uACC4 \uC778\uC99D",-1)),s("div",ue,[a(U,{class:B([n.value<=60?"bg-negative":"bg-info","text-white"]),rounded:""},{default:o(()=>[s("div",de,m(t($)),1),s("div",ce,[a(L,{name:"schedule",size:"24px",class:"q-mr-xs"}),c(" "+m(j.value),1)]),s("div",me,m(n.value<=60?"\u26A0\uFE0F \uC2DC\uAC04\uC774 \uC5BC\uB9C8 \uB0A8\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4!":"\uB0A8\uC740 \uC2DC\uAC04"),1)]),_:1},8,["class"]),a(k,{label:"OTP \uCF54\uB4DC (6\uC790\uB9AC)",filled:"",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=f=>i.value=f),mask:"######",maxlength:"6",onKeyup:V(P,["enter"]),"input-class":"text-center text-h5",hint:"\uD154\uB808\uADF8\uB7A8\uC73C\uB85C \uC804\uC1A1\uB41C 6\uC790\uB9AC \uCF54\uB4DC\uB97C \uC785\uB825\uD558\uC138\uC694",disable:n.value===0,error:!!t(q),"error-message":t(q)},null,8,["modelValue","disable","error","error-message"]),t(v)!==null&&t(v)<=3?(x(),D(U,{key:0,class:B([t(v)===1?"bg-negative":"bg-warning","text-white"]),rounded:"",dense:""},{avatar:o(()=>[a(L,{name:"warning"})]),default:o(()=>[s("div",ve,[e[5]||(e[5]=s("strong",null,"\uACBD\uACE0:",-1)),e[6]||(e[6]=c(" \uB0A8\uC740 \uC2DC\uB3C4 \uD69F\uC218 ")),s("span",pe,m(t(v))+"\uD68C",1)]),t(v)===1?(x(),h("div",ge," \u26A0\uFE0F \uB9C8\uC9C0\uB9C9 \uC2DC\uB3C4\uC785\uB2C8\uB2E4! \uC2E4\uD328 \uC2DC \uB2E4\uC2DC \uB85C\uADF8\uC778\uD574\uC57C \uD569\uB2C8\uB2E4. ")):N("",!0)]),_:1},8,["class"])):N("",!0),a(I,{color:"primary",onClick:P,loading:t(r),disable:t(r)||i.value.length!==6||n.value===0,size:"md"},{default:o(()=>[c(m(t(r)?"\uC778\uC99D \uC911...":"\uC778\uC99D\uD558\uAE30"),1)]),_:1},8,["loading","disable"]),a(I,{color:"grey",outline:"",onClick:A,disable:t(r)},{default:o(()=>e[7]||(e[7]=[c(" \uCDE8\uC18C ")])),_:1},8,["disable"])])])):(x(),h("div",oe,[e[4]||(e[4]=s("h6",null,"Welcome!",-1)),s("div",re,[a(k,{label:"ID",filled:"",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=f=>p.value=f),onKeyup:V(w,["enter"]),onBlur:T,error:!!_.value,"error-message":_.value,"bottom-slots":""},null,8,["modelValue","error","error-message"]),a(k,{label:"PASSWORD",filled:"",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=f=>g.value=f),type:"password",onKeyup:V(w,["enter"]),onBlur:C,error:!!b.value,"error-message":b.value,"bottom-slots":""},null,8,["modelValue","error","error-message"]),a(I,{color:"primary",onClick:w,loading:t(r),disable:t(r)},{default:o(()=>[c(m(t(r)?"\uB85C\uADF8\uC778 \uC911...":"Login"),1)]),_:1},8,["loading","disable"]),a(I,{color:"info",onClick:Y},{default:o(()=>e[3]||(e[3]=[c("Lost ID/PW")])),_:1})])]))])]),_:1})]),_:1})]),_:1}))}};export{_e as default};
